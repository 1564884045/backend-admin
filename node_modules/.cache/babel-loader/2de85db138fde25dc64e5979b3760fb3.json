{"remainingRequest":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js!G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\RQDL\\base\\backend-admin\\src\\components\\FileUpload\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\RQDL\\base\\backend-admin\\src\\components\\FileUpload\\index.vue","mtime":1620715077786},{"path":"G:\\RQDL\\base\\backend-admin\\babel.config.js","mtime":1620715077731},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRmlsZVVwbG9hZCcsCiAgcHJvcHM6IHsKICAgIGFjdGlvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgaGVhZGVyczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkge30KICAgIH0sCiAgICBkYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7fQogICAgfSwKICAgIG5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZmlsZScKICAgIH0sCiAgICBzaXplOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMgogICAgfSwKICAgIG1heDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDMKICAgIH0sCiAgICBmaWxlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgbm90aXA6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBleHQ6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbJ3ppcCcsICdyYXInXTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB2YXIgZmlsZU5hbWUgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKTsKICAgICAgdmFyIGZpbGVFeHQgPSBmaWxlTmFtZVtmaWxlTmFtZS5sZW5ndGggLSAxXTsKICAgICAgdmFyIGlzVHlwZU9rID0gdGhpcy5leHQuaW5kZXhPZihmaWxlRXh0KSA+PSAwOwogICAgICB2YXIgaXNTaXplT2sgPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IHRoaXMuc2l6ZTsKCiAgICAgIGlmICghaXNUeXBlT2spIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCJcdTRFMEFcdTRGMjBcdTY1ODdcdTRFRjZcdTUzRUFcdTY1MkZcdTYzMDEgIi5jb25jYXQodGhpcy5leHQuam9pbignIC8gJyksICIgXHU2ODNDXHU1RjBGXHVGRjAxIikpOwogICAgICB9CgogICAgICBpZiAoIWlzU2l6ZU9rKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiXHU0RTBBXHU0RjIwXHU2NTg3XHU0RUY2XHU1OTI3XHU1QzBGXHU0RTBEXHU4MEZEXHU4RDg1XHU4RkM3ICIuY29uY2F0KHRoaXMuc2l6ZSwgIk1CXHVGRjAxIikpOwogICAgICB9CgogICAgICByZXR1cm4gaXNUeXBlT2sgJiYgaXNTaXplT2s7CiAgICB9LAogICAgb25FeGNlZWQ6IGZ1bmN0aW9uIG9uRXhjZWVkKCkgewogICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+aWh+S7tuS4iuS8oOi2hei/h+mZkOWIticpOwogICAgfSwKICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKHJlcywgZmlsZSkgewogICAgICB0aGlzLiRlbWl0KCdvbi1zdWNjZXNzJywgcmVzLCBmaWxlKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA,CAAA;AAFA,KALA;AASA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA,CAAA;AAFA,KATA;AAaA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAbA;AAiBA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAjBA;AAqBA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KArBA;AAyBA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA,KAzBA;AA6BA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KA7BA;AAiCA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,CAAA,KAAA,EAAA,KAAA,CAAA;AAAA;AAFA;AAjCA,GAFA;AAwCA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,IADA,EACA;AACA,UAAA,QAAA,GAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,UAAA,OAAA,GAAA,QAAA,CAAA,QAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AACA,UAAA,QAAA,GAAA,KAAA,GAAA,CAAA,OAAA,CAAA,OAAA,KAAA,CAAA;AACA,UAAA,QAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,GAAA,KAAA,IAAA;;AACA,UAAA,CAAA,QAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,sDAAA,KAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA;;AACA,UAAA,CAAA,QAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,wEAAA,KAAA,IAAA;AACA;;AACA,aAAA,QAAA,IAAA,QAAA;AACA,KAbA;AAcA,IAAA,QAdA,sBAcA;AACA,WAAA,QAAA,CAAA,OAAA,CAAA,UAAA;AACA,KAhBA;AAiBA,IAAA,SAjBA,qBAiBA,GAjBA,EAiBA,IAjBA,EAiBA;AACA,WAAA,KAAA,CAAA,YAAA,EAAA,GAAA,EAAA,IAAA;AACA;AAnBA;AAxCA,CAAA","sourcesContent":["<template>\r\n    <el-upload\r\n        :action=\"action\"\r\n        :data=\"data\"\r\n        :name=\"name\"\r\n        :before-upload=\"beforeUpload\"\r\n        :on-exceed=\"onExceed\"\r\n        :on-success=\"onSuccess\"\r\n        :file-list=\"files\"\r\n        :limit=\"max\"\r\n        drag\r\n    >\r\n        <div class=\"slot\">\r\n            <i class=\"el-icon-upload\" />\r\n            <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n        </div>\r\n        <div v-if=\"!notip\" slot=\"tip\" class=\"el-upload__tip\">\r\n            <div style=\"display: inline-block;\">\r\n                <el-alert :title=\"`上传文件支持 ${ ext.join(' / ') } 格式，单个文件大小不超过 ${ size }MB，且文件数量不超过 ${ max } 个`\" type=\"info\" show-icon :closable=\"false\" />\r\n            </div>\r\n        </div>\r\n    </el-upload>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'FileUpload',\r\n    props: {\r\n        action: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        headers: {\r\n            type: Object,\r\n            default: () => {}\r\n        },\r\n        data: {\r\n            type: Object,\r\n            default: () => {}\r\n        },\r\n        name: {\r\n            type: String,\r\n            default: 'file'\r\n        },\r\n        size: {\r\n            type: Number,\r\n            default: 2\r\n        },\r\n        max: {\r\n            type: Number,\r\n            default: 3\r\n        },\r\n        files: {\r\n            type: Array,\r\n            default: () => []\r\n        },\r\n        notip: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        ext: {\r\n            type: Array,\r\n            default: () => ['zip', 'rar']\r\n        }\r\n    },\r\n    methods: {\r\n        beforeUpload(file) {\r\n            const fileName = file.name.split('.')\r\n            const fileExt = fileName[fileName.length - 1]\r\n            const isTypeOk = this.ext.indexOf(fileExt) >= 0\r\n            const isSizeOk = file.size / 1024 / 1024 < this.size\r\n            if (!isTypeOk) {\r\n                this.$message.error(`上传文件只支持 ${ this.ext.join(' / ') } 格式！`)\r\n            }\r\n            if (!isSizeOk) {\r\n                this.$message.error(`上传文件大小不能超过 ${this.size}MB！`)\r\n            }\r\n            return isTypeOk && isSizeOk\r\n        },\r\n        onExceed() {\r\n            this.$message.warning('文件上传超过限制')\r\n        },\r\n        onSuccess(res, file) {\r\n            this.$emit('on-success', res, file)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-upload-dragger {\r\n    width: auto;\r\n    height: auto;\r\n    overflow: unset;\r\n    &.is-dragover {\r\n        border-width: 1px;\r\n    }\r\n}\r\n.slot {\r\n    width: 300px;\r\n    height: 160px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/FileUpload"}]}