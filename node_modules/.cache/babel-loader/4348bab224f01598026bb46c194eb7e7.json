{"remainingRequest":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js!G:\\RQDL\\base\\backend-admin\\src\\utils\\cache.js","dependencies":[{"path":"G:\\RQDL\\base\\backend-admin\\src\\utils\\cache.js","mtime":1620715077827},{"path":"G:\\RQDL\\base\\backend-admin\\babel.config.js","mtime":1620715077731},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGdsb2JhbFNldHRpbmdzIGZyb20gIkAvc2V0dGluZyI7CnZhciBsb2NhbFN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlOwp2YXIgc3RvcmFnZVR5cGUgPSBnbG9iYWxTZXR0aW5ncy5zdG9yYWdlVHlwZTsKLyoqDQogKg0KICogQGRlc2NyaXB0aW9uIOiOt+WPlmFjY2Vzc1Rva2VuDQogKiBAcmV0dXJucyB7c3RyaW5nfEFjdGl2ZVguSVhNTERPTU5vZGV8UHJvbWlzZTxhbnk+fGFueXxJREJSZXF1ZXN0PGFueT58TWVkaWFLZXlTdGF0dXN8Rm9ybURhdGFFbnRyeVZhbHVlfEZ1bmN0aW9ufFByb21pc2U8Q3JlZGVudGlhbCB8IG51bGw+fQ0KICovCgp2YXIgZ2V0Q2FjaGUgPSBmdW5jdGlvbiBnZXRDYWNoZShrZXkpIHsKICB2YXIgZGF0YTsKCiAgaWYgKHN0b3JhZ2VUeXBlKSB7CiAgICBpZiAoJ2xvY2FsU3RvcmFnZScgPT09IHN0b3JhZ2VUeXBlKSB7CiAgICAgIGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgfSBlbHNlIGlmICgnc2Vzc2lvblN0b3JhZ2UnID09PSBzdG9yYWdlVHlwZSkgewogICAgICBkYXRhID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgfSBlbHNlIHsKICAgICAgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogIH0KCiAgdHJ5IHsKICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpOwogIH0gY2F0Y2ggKGUpIHsKICAgIHJldHVybiBudWxsOwogIH0KfTsKLyoqDQogKiBAZGVzY3JpcHRpb24g5a2Y5YKoYWNjZXNzVG9rZW4NCiAqIEByZXR1cm5zIHt2b2lkfCp9DQogKiBAcGFyYW0ga2V5DQogKiBAcGFyYW0gZGF0YQ0KICovCgoKdmFyIHNldENhY2hlID0gZnVuY3Rpb24gc2V0Q2FjaGUoa2V5LCBkYXRhKSB7CiAgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOwoKICBpZiAoc3RvcmFnZVR5cGUpIHsKICAgIGlmICgnbG9jYWxTdG9yYWdlJyA9PT0gc3RvcmFnZVR5cGUpIHsKICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgZGF0YSk7CiAgICB9IGVsc2UgaWYgKCdzZXNzaW9uU3RvcmFnZScgPT09IHN0b3JhZ2VUeXBlKSB7CiAgICAgIHJldHVybiBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGtleSwgZGF0YSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBkYXRhKTsKICAgIH0KICB9IGVsc2UgewogICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgZGF0YSk7CiAgfQp9OwovKioNCiAqIEBkZXNjcmlwdGlvbiDnp7vpmaRhY2Nlc3NUb2tlbg0KICogQHJldHVybnMge3ZvaWR8UHJvbWlzZTx2b2lkPn0NCiAqLwoKCnZhciByZW1vdmVDYWNoZSA9IGZ1bmN0aW9uIHJlbW92ZUNhY2hlKGtleSkgewogIGlmIChzdG9yYWdlVHlwZSkgewogICAgaWYgKCdsb2NhbFN0b3JhZ2UnID09PSBzdG9yYWdlVHlwZSkgewogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTsKICAgIH0gZWxzZSBpZiAoJ3Nlc3Npb25TdG9yYWdlJyA9PT0gc3RvcmFnZVR5cGUpIHsKICAgICAgcmV0dXJuIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTsKICAgIH0KICB9IGVsc2UgewogICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7CiAgfQp9OwoKZXhwb3J0IGRlZmF1bHQgewogIGdldENhY2hlOiBnZXRDYWNoZSwKICBzZXRDYWNoZTogc2V0Q2FjaGUsCiAgcmVtb3ZlQ2FjaGU6IHJlbW92ZUNhY2hlLAogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7CiAgICBWdWUucHJvdG90eXBlLiRnZXRDYWNoZSA9IGdldENhY2hlOwogICAgVnVlLnByb3RvdHlwZS4kc2V0Q2FjaGUgPSBzZXRDYWNoZTsKICAgIFZ1ZS5wcm90b3R5cGUuJHJlbW92ZUNhY2hlID0gcmVtb3ZlQ2FjaGU7CiAgfQp9Ow=="},{"version":3,"sources":["G:/RQDL/base/backend-admin/src/utils/cache.js"],"names":["globalSettings","localStorage","window","storageType","getCache","key","data","getItem","sessionStorage","JSON","parse","e","setCache","stringify","setItem","removeCache","removeItem","clear","install","Vue","prototype","$getCache","$setCache","$removeCache"],"mappings":"AAAA,OAAOA,cAAP,MAA2B,WAA3B;AAEA,IAAMC,YAAY,GAAGC,MAAM,CAACD,YAA5B;AACA,IAAME,WAAW,GAAGH,cAAc,CAACG,WAAnC;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD,EAAS;AACtB,MAAIC,IAAJ;;AACA,MAAIH,WAAJ,EAAiB;AACb,QAAI,mBAAmBA,WAAvB,EAAoC;AAChCG,MAAAA,IAAI,GAAGL,YAAY,CAACM,OAAb,CAAqBF,GAArB,CAAP;AACH,KAFD,MAEO,IAAI,qBAAqBF,WAAzB,EAAsC;AACzCG,MAAAA,IAAI,GAAGE,cAAc,CAACD,OAAf,CAAuBF,GAAvB,CAAP;AACH,KAFM,MAEA;AACHC,MAAAA,IAAI,GAAGL,YAAY,CAACM,OAAb,CAAqBF,GAArB,CAAP;AACH;AACJ,GARD,MAQO;AACHC,IAAAA,IAAI,GAAGL,YAAY,CAACM,OAAb,CAAqBF,GAArB,CAAP;AACH;;AACD,MAAI;AACA,WAAOI,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAP;AACH,GAFD,CAEE,OAAOK,CAAP,EAAU;AACR,WAAO,IAAP;AACH;AACJ,CAlBD;AAoBA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACP,GAAD,EAAMC,IAAN,EAAe;AAC5BA,EAAAA,IAAI,GAAGG,IAAI,CAACI,SAAL,CAAeP,IAAf,CAAP;;AACA,MAAIH,WAAJ,EAAiB;AACb,QAAI,mBAAmBA,WAAvB,EAAoC;AAChC,aAAOF,YAAY,CAACa,OAAb,CAAqBT,GAArB,EAA0BC,IAA1B,CAAP;AACH,KAFD,MAEO,IAAI,qBAAqBH,WAAzB,EAAsC;AACzC,aAAOK,cAAc,CAACM,OAAf,CAAuBT,GAAvB,EAA4BC,IAA5B,CAAP;AACH,KAFM,MAEA;AACH,aAAOL,YAAY,CAACa,OAAb,CAAqBT,GAArB,EAA0BC,IAA1B,CAAP;AACH;AACJ,GARD,MAQO;AACH,WAAOL,YAAY,CAACa,OAAb,CAAqBT,GAArB,EAA0BC,IAA1B,CAAP;AACH;AACJ,CAbD;AAeA;AACA;AACA;AACA;;;AACA,IAAMS,WAAW,GAAG,SAAdA,WAAc,CAACV,GAAD,EAAS;AACzB,MAAIF,WAAJ,EAAiB;AACb,QAAI,mBAAmBA,WAAvB,EAAoC;AAChC,aAAOF,YAAY,CAACe,UAAb,CAAwBX,GAAxB,CAAP;AACH,KAFD,MAEO,IAAI,qBAAqBF,WAAzB,EAAsC;AACzC,aAAOK,cAAc,CAACS,KAAf,EAAP;AACH,KAFM,MAEA;AACH,aAAOhB,YAAY,CAACe,UAAb,CAAwBX,GAAxB,CAAP;AACH;AACJ,GARD,MAQO;AACH,WAAOJ,YAAY,CAACe,UAAb,CAAwBX,GAAxB,CAAP;AACH;AACJ,CAZD;;AAcA,eAAe;AACXD,EAAAA,QAAQ,EAARA,QADW;AAEXQ,EAAAA,QAAQ,EAARA,QAFW;AAGXG,EAAAA,WAAW,EAAXA,WAHW;AAIXG,EAAAA,OAAO,EAAE,iBAAAC,GAAG,EAAI;AACZA,IAAAA,GAAG,CAACC,SAAJ,CAAcC,SAAd,GAA0BjB,QAA1B;AACAe,IAAAA,GAAG,CAACC,SAAJ,CAAcE,SAAd,GAA0BV,QAA1B;AACAO,IAAAA,GAAG,CAACC,SAAJ,CAAcG,YAAd,GAA6BR,WAA7B;AACH;AARU,CAAf","sourcesContent":["import globalSettings from \"@/setting\";\r\n\r\nconst localStorage = window.localStorage;\r\nconst storageType = globalSettings.storageType;\r\n/**\r\n *\r\n * @description 获取accessToken\r\n * @returns {string|ActiveX.IXMLDOMNode|Promise<any>|any|IDBRequest<any>|MediaKeyStatus|FormDataEntryValue|Function|Promise<Credential | null>}\r\n */\r\nconst getCache = (key) => {\r\n    let data;\r\n    if (storageType) {\r\n        if ('localStorage' === storageType) {\r\n            data = localStorage.getItem(key)\r\n        } else if ('sessionStorage' === storageType) {\r\n            data = sessionStorage.getItem(key)\r\n        } else {\r\n            data = localStorage.getItem(key)\r\n        }\r\n    } else {\r\n        data = localStorage.getItem(key)\r\n    }\r\n    try {\r\n        return JSON.parse(data);\r\n    } catch (e) {\r\n        return null;\r\n    }\r\n};\r\n\r\n/**\r\n * @description 存储accessToken\r\n * @returns {void|*}\r\n * @param key\r\n * @param data\r\n */\r\nconst setCache = (key, data) => {\r\n    data = JSON.stringify(data)\r\n    if (storageType) {\r\n        if ('localStorage' === storageType) {\r\n            return localStorage.setItem(key, data)\r\n        } else if ('sessionStorage' === storageType) {\r\n            return sessionStorage.setItem(key, data)\r\n        } else {\r\n            return localStorage.setItem(key, data)\r\n        }\r\n    } else {\r\n        return localStorage.setItem(key, data)\r\n    }\r\n};\r\n\r\n/**\r\n * @description 移除accessToken\r\n * @returns {void|Promise<void>}\r\n */\r\nconst removeCache = (key) => {\r\n    if (storageType) {\r\n        if ('localStorage' === storageType) {\r\n            return localStorage.removeItem(key)\r\n        } else if ('sessionStorage' === storageType) {\r\n            return sessionStorage.clear()\r\n        } else {\r\n            return localStorage.removeItem(key)\r\n        }\r\n    } else {\r\n        return localStorage.removeItem(key)\r\n    }\r\n};\r\n\r\nexport default {\r\n    getCache,\r\n    setCache,\r\n    removeCache,\r\n    install: Vue => {\r\n        Vue.prototype.$getCache = getCache;\r\n        Vue.prototype.$setCache = setCache;\r\n        Vue.prototype.$removeCache = removeCache;\r\n    }\r\n}\r\n"]}]}