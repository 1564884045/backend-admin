{"remainingRequest":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js!G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\RQDL\\base\\backend-admin\\src\\views\\user\\components\\chatBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\RQDL\\base\\backend-admin\\src\\views\\user\\components\\chatBox.vue","mtime":1620715077891},{"path":"G:\\RQDL\\base\\backend-admin\\babel.config.js","mtime":1620715077731},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkc6L1JRREwvYmFzZS9iYWNrZW5kLWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBTY3JvbGxMb2FkZXIgZnJvbSAnLi9zY3JvbGxMb2FkZXIudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjaGF0Qm94IiwKICBjb21wb25lbnRzOiB7CiAgICBTY3JvbGxMb2FkZXI6IFNjcm9sbExvYWRlcgogIH0sCiAgcHJvcHM6IHsKICAgIHVzZXJJZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIG5pY2tuYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgYXZhdGFyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2h0dHBzOi8vZnVzczEwLmVsZW1lY2RuLmNvbS9lLzVkLzRhNzMxYTkwNTk0YTRhZjU0NGMwYzI1OTQxMTcxanBlZy5qcGVnJwogICAgfSwKICAgIHdpZHRoOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNjUwCiAgICB9LAogICAgd3JhcEJnOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJyNlZmVmZWYnCiAgICB9LAogICAgbWF4SGVpZ2h0OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNzAwCiAgICB9LAogICAgbWluSGVpZ2h0OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogNzAwCiAgICB9LAogICAgb3duZXJBdmF0YXJVcmw6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbXNnOiAnJywKICAgICAgaXNVcHBlckxhb2Rpbmc6IGZhbHNlLAogICAgICBpc1VuZGVyTGFvZGluZzogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBpc1JlZnJlc2hlZEFsbDogZmFsc2UsCiAgICAgIGlzTG9hZGVkQWxsOiBmYWxzZSwKICAgICAgbXNnTGlzdDogW10sCiAgICAgIHBhZ2U6IDEsCiAgICAgIHBhZ2VTaXplOiAyMCwKICAgICAgc29ja2V0OiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5nZXREYXRhKCk7CiAgICB0aGlzLiR3cy5jb25uZWN0KCk7CgogICAgdGhpcy4kd3Mub25Nc2cgPSBmdW5jdGlvbiAocmVzKSB7CiAgICAgIGNvbnNvbGUubG9nKCLogYrlpKnnqpflj6MiLCByZXMpOwoKICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICBpZiAocmVzLmRhdGEpIHsKICAgICAgICAgIHZhciBtc2dEYXRhID0gSlNPTi5wYXJzZShyZXMuZGF0YSk7CgogICAgICAgICAgX3RoaXMubXNnTGlzdC5wdXNoKHsKICAgICAgICAgICAgbXNnOiBtc2dEYXRhLm1zZywKICAgICAgICAgICAgbXk6IGZhbHNlLAogICAgICAgICAgICB0eXBlOiAxCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREYXRhOiBmdW5jdGlvbiBnZXREYXRhKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHBhZ2VEYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHBhZ2VEYXRhID0gewogICAgICAgICAgICAgICAgICBwYWdlU2l6ZTogX3RoaXMyLnBhZ2VTaXplLAogICAgICAgICAgICAgICAgICBwYWdlOiBfdGhpczIucGFnZQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBfdGhpczIuJGFwaS5nZXQoIm5vdGljZS9tZW1iZXIvIiArIF90aGlzMi51c2VySWQsIHBhZ2VEYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX2xpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICByZXMuZGF0YS5saXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgIF9saXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBteTogIWl0ZW0udXNlcklkLAogICAgICAgICAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgLy/moLnmja7ov5nkuKrmnaXmjpLluo/mtojmga8KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMSwKICAgICAgICAgICAgICAgICAgICAgICAgLy8x5Li65paH5pys77yMMuS4uuWbvueJhwogICAgICAgICAgICAgICAgICAgICAgICBtc2c6IGl0ZW0ubXNnLAogICAgICAgICAgICAgICAgICAgICAgICAvL+W9k3R5cGXkuLox5pe26L+Z6YeM5piv5paH5pys5raI5oGv77yM5b2TdHlwZTLkuLoy5pe26L+Z6YeM6KaB5a2Y5pS+5Zu+54mH5Zyw5Z2A77yb5ZCO57ut5Lya5pSv5oyB6K+t6Z+z55qE5pi+56S6CiAgICAgICAgICAgICAgICAgICAgICAgIGN0aW1lOiBpdGVtLmNyZWF0ZVRpbWUgLy/mmL7npLrlvZPliY3mtojmga/nmoTlj5HpgIHml7bpl7QKCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBfdGhpczIubXNnTGlzdCA9IF9saXN0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsgLy8gdGhpcy5tc2dMaXN0ID0gW3sKICAgICAgICAgICAgICAgIC8vICAgICBteTogZmFsc2UsCiAgICAgICAgICAgICAgICAvLyAgICAgaWQ6IDEsIC8v5qC55o2u6L+Z5Liq5p2l5o6S5bqP5raI5oGvCiAgICAgICAgICAgICAgICAvLyAgICAgdHlwZTogMSwgLy8x5Li65paH5pys77yMMuS4uuWbvueJhwogICAgICAgICAgICAgICAgLy8gICAgIG1zZzogJ+S9oOWlvSEhW+WRsueJmV0nLCAvL+W9k3R5cGXkuLox5pe26L+Z6YeM5piv5paH5pys5raI5oGv77yM5b2TdHlwZTLkuLoy5pe26L+Z6YeM6KaB5a2Y5pS+5Zu+54mH5Zyw5Z2A77yb5ZCO57ut5Lya5pSv5oyB6K+t6Z+z55qE5pi+56S6CiAgICAgICAgICAgICAgICAvLyAgICAgY3RpbWU6IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKSAvL+aYvuekuuW9k+WJjea2iOaBr+eahOWPkemAgeaXtumXtAogICAgICAgICAgICAgICAgLy8gfSwKICAgICAgICAgICAgICAgIC8vICAgICB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIG15OiB0cnVlLAogICAgICAgICAgICAgICAgLy8gICAgICAgICBpZDogMiwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgdHlwZTogMSwKICAgICAgICAgICAgICAgIC8vICAgICAgICAgbXNnOiAn5L2g5Lmf5aW944CCW+Wus+e+nl0nLAogICAgICAgICAgICAgICAgLy8gICAgICAgICBjdGltZTogbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpCiAgICAgICAgICAgICAgICAvLyAgICAgfV07CgoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2VuZE1zZzogZnVuY3Rpb24gc2VuZE1zZygpIHsKICAgICAgLy8g5raI5oGv5Li656m65LiN5YGa5Lu75L2V5pON5L2cCiAgICAgIGlmICh0aGlzLm1zZyA9PT0gIiIpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS53YXJuaW5nKCLmtojmga/kuI3og73kuLrnqboiKTsKICAgICAgfSAvLyDmmL7npLrmtojmga8gbXNn5raI5oGv5paH5pysLG156Ym05Yir5piv6LCB5Y+R55qE5raI5oGvKOS4jeiDveeUqOS/qeS4qua2iOaBr+aVsOe7hOW+queOryzlkKbliJnmtojmga/kuI3kvJrnqb/mj5IpCgoKICAgICAgdmFyIG1zZyA9IHRoaXMubXNnLnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgIiIpOwogICAgICBpZiAoIW1zZykgcmV0dXJuOwogICAgICB0aGlzLm1zZ0xpc3QucHVzaCh7CiAgICAgICAgbXNnOiBtc2csCiAgICAgICAgbXk6IHRydWUsCiAgICAgICAgdHlwZTogMQogICAgICB9KTsgLy8g5L+d6K+B5raI5oGv5Y+v6KeBCiAgICAgIC8vIHRoaXMubXNnR28oKQogICAgICAvLyDlm57nrZTpl67popgKCiAgICAgIHRoaXMubXNnU2VuZEFjdGlvbih0aGlzLm1zZyk7IC8vIOa4hemZpOa2iOaBrwoKICAgICAgdGhpcy5tc2cgPSAiIjsKICAgIH0sCiAgICBtc2dTZW5kQWN0aW9uOiBmdW5jdGlvbiBtc2dTZW5kQWN0aW9uKHgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAvLyDov5nph4zov57mjqXmnI3liqHlmajojrflj5bnrZTmoYgKICAgICAgLy8g5LiL6Z2i5qih5ouf6K+35rGCCiAgICAgIHRoaXMuJGFwaS5wb3N0KCJpbSIsIHsKICAgICAgICB0b1VzZXI6IHRoaXMudXNlcklkLAogICAgICAgIG1zZzogeAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgLy8g5raI5oGv5Y+R6YCB5oiQ5YqfIOWKoOi9vWxvYWRpbmcKICAgICAgICAgIF90aGlzMy5tc2dMb2FkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdldFVuZGVyRGF0YTogZnVuY3Rpb24gZ2V0VW5kZXJEYXRhKCkge30sCiAgICBnZXRVcHBlckRhdGE6IGZ1bmN0aW9uIGdldFVwcGVyRGF0YSgpIHt9LAogICAgLy/lkJHkuIrmi4nliLfmlrAKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goZG9uZSkgewogICAgICB2YXIgbWUgPSB0aGlzOwoKICAgICAgaWYgKG1lLmlzVXBwZXJMYW9kaW5nKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAobWUuaXNSZWZyZXNoZWRBbGwpIHsKICAgICAgICBkb25lKHRydWUpOwogICAgICAgIG1lLmlzVXBwZXJMYW9kaW5nID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIHRoaXMuZ2V0VXBwZXJEYXRhKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIG1lLmlzUmVmcmVzaGVkQWxsID0gdHJ1ZTsKICAgICAgICAgICAgZG9uZSh0cnVlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1lLm1zZ0xpc3QgPSBkYXRhLnJldmVyc2UoKS5jb25jYXQobWUubXNnTGlzdCk7IC8v5YCS5bqP5ZCI5bm2CgogICAgICAgICAgICBkb25lKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignd3hDaGF0OiBwcm9wcyAiZ2V0VXBwZXJEYXRhIiBtdXN0IHJldHVybiBhIHByb21pc2Ugb2JqZWN0IScpOwogICAgICB9CgogICAgICBtZS5pc1VwcGVyTGFvZGluZyA9IGZhbHNlOwogICAgfSwKICAgIC8v5ZCR5LiL5ouJ5Yqg6L29CiAgICBpbmZpbml0ZTogZnVuY3Rpb24gaW5maW5pdGUoZG9uZSkgewogICAgICB2YXIgbWUgPSB0aGlzOwoKICAgICAgaWYgKG1lLmlzVW5kZXJMYW9kaW5nKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAobWUuaXNMb2FkZWRBbGwpIHsKICAgICAgICBkb25lKHRydWUpOwogICAgICAgIG1lLmlzVW5kZXJMYW9kaW5nID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIHRoaXMuZ2V0VW5kZXJEYXRhKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKGRhdGEgPT09IDApIHsKICAgICAgICAgICAgbWUuaXNMb2FkZWRBbGwgPSB0cnVlOwogICAgICAgICAgICBkb25lKHRydWUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZG9uZSgpOwogICAgICAgICAgICBtZS5tc2dMaXN0ID0gbWUubXNnTGlzdC5jb25jYXQoZGF0YSk7IC8v55u05o6l5ZCI5bm2CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignd3hDaGF0OiBwcm9wcyAiZ2V0VW5kZXJEYXRhIiBtdXN0IHJldHVybiBhIHByb21pc2Ugb2JqZWN0IScpOwogICAgICB9CgogICAgICBtZS5pc1VuZGVyTGFvZGluZyA9IGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["chatBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA,OAAA,YAAA,MAAA,oBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,YAAA,EAAA;AADA,GAFA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KADA;AAMA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KANA;AAWA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAXA;AAgBA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAhBA;AAqBA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KArBA;AA0BA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KA1BA;AA8BA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KA9BA;AAoCA,IAAA,cAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AApCA,GALA;AA8CA,EAAA,IA9CA,kBA8CA;AACA,WAAA;AACA,MAAA,GAAA,EAAA,EADA;AAEA,MAAA,cAAA,EAAA,KAFA;AAGA,MAAA,cAAA,EAAA,KAHA;AAIA,MAAA,OAAA,EAAA,KAJA;AAMA,MAAA,cAAA,EAAA,KANA;AAOA,MAAA,WAAA,EAAA,KAPA;AASA,MAAA,OAAA,EAAA,EATA;AAWA,MAAA,IAAA,EAAA,CAXA;AAYA,MAAA,QAAA,EAAA,EAZA;AAcA,MAAA,MAAA,EAAA;AAdA,KAAA;AAgBA,GA/DA;AAgEA,EAAA,OAhEA,qBAgEA;AAAA;;AACA,SAAA,OAAA;AACA,SAAA,GAAA,CAAA,OAAA;;AACA,SAAA,GAAA,CAAA,KAAA,GAAA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,GAAA;;AACA,UAAA,GAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,EAAA;AACA,cAAA,OAAA,GAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA;;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,GAAA,EAAA,OAAA,CAAA,GADA;AAEA,YAAA,EAAA,EAAA,KAFA;AAGA,YAAA,IAAA,EAAA;AAHA,WAAA;AAKA;AACA;AAEA,KAbA;AAcA,GAjFA;AAmFA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,QADA,GACA;AACA,kBAAA,QAAA,EAAA,MAAA,CAAA,QADA;AAEA,kBAAA,IAAA,EAAA,MAAA,CAAA;AAFA,iBADA;;AAKA,gBAAA,MAAA,CAAA,IAAA,CAAA,GAAA,CAAA,mBAAA,MAAA,CAAA,MAAA,EAAA,QAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,sBAAA,GAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,wBAAA,KAAA,GAAA,EAAA;AACA,oBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,sBAAA,KAAA,CAAA,IAAA,CAAA;AACA,wBAAA,EAAA,EAAA,CAAA,IAAA,CAAA,MADA;AAEA,wBAAA,EAAA,EAAA,IAAA,CAAA,EAFA;AAEA;AACA,wBAAA,IAAA,EAAA,CAHA;AAGA;AACA,wBAAA,GAAA,EAAA,IAAA,CAAA,GAJA;AAIA;AACA,wBAAA,KAAA,EAAA,IAAA,CAAA,UALA,CAKA;;AALA,uBAAA;AAOA,qBARA;AAUA,oBAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA;AACA,iBAfA,EALA,CAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAlCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmCA,KApCA;AAqCA,IAAA,OArCA,qBAqCA;AACA;AACA,UAAA,KAAA,GAAA,KAAA,EAAA,EAAA;AACA,eAAA,KAAA,QAAA,CAAA,OAAA,CAAA,QAAA,CAAA;AACA,OAJA,CAKA;;;AACA,UAAA,GAAA,GAAA,KAAA,GAAA,CAAA,OAAA,CAAA,gBAAA,EAAA,EAAA,CAAA;AACA,UAAA,CAAA,GAAA,EAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,GAAA,EAAA,GADA;AAEA,QAAA,EAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EARA,CAaA;AACA;AACA;;AACA,WAAA,aAAA,CAAA,KAAA,GAAA,EAhBA,CAiBA;;AACA,WAAA,GAAA,GAAA,EAAA;AACA,KAxDA;AAyDA,IAAA,aAAA,EAAA,uBAAA,CAAA,EAAA;AAAA;;AACA;AACA;AACA,WAAA,IAAA,CAAA,IAAA,CAAA,IAAA,EAAA;AACA,QAAA,MAAA,EAAA,KAAA,MADA;AAEA,QAAA,GAAA,EAAA;AAFA,OAAA,EAGA,IAHA,CAGA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA;AACA,UAAA,MAAA,CAAA,OAAA,GAAA,IAAA;AACA;AACA,OARA;AASA,KArEA;AAuEA,IAAA,YAvEA,0BAuEA,CAEA,CAzEA;AA2EA,IAAA,YA3EA,0BA2EA,CAEA,CA7EA;AA+EA;AACA,IAAA,OAhFA,mBAgFA,IAhFA,EAgFA;AACA,UAAA,EAAA,GAAA,IAAA;;AACA,UAAA,EAAA,CAAA,cAAA,EAAA;AACA;AACA;;AAEA,UAAA,EAAA,CAAA,cAAA,EAAA;AACA,QAAA,IAAA,CAAA,IAAA,CAAA;AACA,QAAA,EAAA,CAAA,cAAA,GAAA,KAAA;AACA;AACA;;AAEA,UAAA;AACA,aAAA,YAAA,GAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,YAAA,EAAA,CAAA,cAAA,GAAA,IAAA;AACA,YAAA,IAAA,CAAA,IAAA,CAAA;AACA,WAHA,MAGA;AACA,YAAA,EAAA,CAAA,OAAA,GAAA,IAAA,CAAA,OAAA,GAAA,MAAA,CAAA,EAAA,CAAA,OAAA,CAAA,CADA,CACA;;AACA,YAAA,IAAA;AACA;AACA,SARA;AASA,OAVA,CAUA,OAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,4DAAA;AACA;;AACA,MAAA,EAAA,CAAA,cAAA,GAAA,KAAA;AACA,KA1GA;AA4GA;AACA,IAAA,QA7GA,oBA6GA,IA7GA,EA6GA;AACA,UAAA,EAAA,GAAA,IAAA;;AACA,UAAA,EAAA,CAAA,cAAA,EAAA;AACA;AACA;;AACA,UAAA,EAAA,CAAA,WAAA,EAAA;AACA,QAAA,IAAA,CAAA,IAAA,CAAA;AACA,QAAA,EAAA,CAAA,cAAA,GAAA,KAAA;AACA;AACA;;AAEA,UAAA;AACA,aAAA,YAAA,GAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,KAAA,CAAA,EAAA;AACA,YAAA,EAAA,CAAA,WAAA,GAAA,IAAA;AACA,YAAA,IAAA,CAAA,IAAA,CAAA;AACA,WAHA,MAGA;AACA,YAAA,IAAA;AACA,YAAA,EAAA,CAAA,OAAA,GAAA,EAAA,CAAA,OAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAFA,CAEA;AACA;AACA,SARA;AASA,OAVA,CAUA,OAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,4DAAA;AACA;;AACA,MAAA,EAAA,CAAA,cAAA,GAAA,KAAA;AACA;AAtIA;AAnFA,CAAA","sourcesContent":["<template>\r\n    <el-card class=\"box-card\">\r\n        <el-container>\r\n            <el-main style=\"padding: 0\">\r\n                <div class=\"wxchat-container\" :style=\"{backgroundColor: wrapBg}\">\r\n                    <div class=\"window\" id=\"window-view-container\" style=\"height: 450px; position: relative\">\r\n                        <!-- data is empty -->\r\n                        <div class=\"loading\" v-if=\"msgList && msgList.length===0\">\r\n                            <div style=\"text-align:center; font-size: 16px;\">\r\n                                <span>未查找到聊天记录</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- loading -->\r\n                        <div class=\"loading\" v-if=\"loading\">\r\n                            <div>\r\n                                <div>加载中...</div>\r\n                            </div>\r\n                        </div>\r\n                        <!-- main -->\r\n                        <ScrollLoader :minHeight=\"minHeight\" @scroll-to-top=\"refresh\" @scroll-to-botton=\"infinite\"\r\n                                      class=\"container-main\" v-if=\"msgList && msgList.length>0\"\r\n                                      style=\"height: 100%\">\r\n                            <div class=\"message\">\r\n                                <ul>\r\n                                    <li v-for=\"(message, index) in msgList\" :key=\"index\"\r\n                                        :class=\"message.my?'an-move-right':'an-move-left'\">\r\n                                        <p class=\"time\"><span v-text=\"message.ctime\"/></p>\r\n                                        <p class=\"time system\" v-if=\"message.type===10000\">\r\n                                            <span v-html=\"message.msg\"/>\r\n                                        </p>\r\n                                        <div :class=\"'main' + (message.my?' self':'')\" v-else>\r\n\r\n                                            <el-avatar v-if=\"!message.my\" class=\"avatar\" icon=\"el-icon-user-solid\"\r\n                                                       :size=\"50\"\r\n                                                       :src=\"avatar\">\r\n                                            </el-avatar>\r\n                                            <!-- 文本 -->\r\n                                            <div class=\"text\" v-html=\"message.msg\" v-if=\"message.type===1\"></div>\r\n\r\n                                            <!-- 图片 -->\r\n                                            <div class=\"text\" v-else-if=\"message.type===2\">\r\n                                                <el-image :src=\"message.msg\">\r\n                                                    <div slot=\"error\" class=\"image-slot\">\r\n                                                        <i class=\"el-icon-picture-outline\"></i>\r\n                                                        加载失败\r\n                                                    </div>\r\n                                                </el-image>\r\n                                            </div>\r\n\r\n                                            <!-- 其他 -->\r\n                                            <div class=\"text\" v-else-if=\"message.type!==10000\"\r\n                                                 v-text=\"'[暂未支持的消息类型:'+ message.type +']\\n\\r' + message.msg\">\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n\r\n                                </ul>\r\n                            </div>\r\n                        </ScrollLoader>\r\n                        <div style=\"display:flex; position: absolute;bottom: 0;width: 100%;background-color: #FFF; padding: 5px;\">\r\n                            <el-input v-model=\"msg\" style=\"width: 70%\" placeholder=\"请输入发送内容\"/>\r\n                            <div style=\"width: 25%; display: flex; justify-content: center\">\r\n                                <el-button size=\"mini\" type=\"primary\" @click=\"sendMsg\">发送</el-button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </el-main>\r\n        </el-container>\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\n    import ScrollLoader from './scrollLoader.vue';\r\n\r\n    export default {\r\n        name: \"chatBox\",\r\n        components: {\r\n            ScrollLoader\r\n        },\r\n        props: {\r\n            userId: {\r\n                type: String,\r\n                default: '',\r\n                required: true,\r\n            },\r\n            nickname: {\r\n                type: String,\r\n                default: '',\r\n                required: true,\r\n            },\r\n            avatar: {\r\n                type: String,\r\n                default: 'https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg'\r\n            },\r\n\r\n            width: {\r\n                type: Number,\r\n                default: 650,\r\n            },\r\n\r\n            wrapBg: {\r\n                type: String,\r\n                default: '#efefef'\r\n            },\r\n\r\n            maxHeight: {\r\n                type: Number,\r\n                default: 700\r\n            },\r\n            minHeight: {\r\n                type: Number,\r\n                default: 700\r\n            },\r\n\r\n\r\n            ownerAvatarUrl: {\r\n                type: String,\r\n            }\r\n        },\r\n\r\n        data() {\r\n            return {\r\n                msg: '',\r\n                isUpperLaoding: false,\r\n                isUnderLaoding: false,\r\n                loading: false,\r\n\r\n                isRefreshedAll: false,\r\n                isLoadedAll: false,\r\n\r\n                msgList: [],\r\n\r\n                page: 1,\r\n                pageSize: 20,\r\n\r\n                socket: null\r\n            }\r\n        },\r\n        created() {\r\n            this.getData();\r\n            this.$ws.connect();\r\n            this.$ws.onMsg = (res) => {\r\n                console.log(\"聊天窗口\", res);\r\n                if (res.code === 200) {\r\n                    if (res.data) {\r\n                        let msgData = JSON.parse(res.data);\r\n                        this.msgList.push({\r\n                            msg: msgData.msg,\r\n                            my: false,\r\n                            type: 1\r\n                        });\r\n                    }\r\n                }\r\n\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            async getData() {\r\n                let pageData = {\r\n                    pageSize: this.pageSize,\r\n                    page: this.page\r\n                };\r\n                this.$api.get(\"notice/member/\" + this.userId, pageData).then(res => {\r\n                    if (res.code === 200) {\r\n                        let _list = [];\r\n                        res.data.list.forEach(item => {\r\n                            _list.push({\r\n                                my: !item.userId,\r\n                                id: item.id, //根据这个来排序消息\r\n                                type: 1, //1为文本，2为图片\r\n                                msg: item.msg, //当type为1时这里是文本消息，当type2为2时这里要存放图片地址；后续会支持语音的显示\r\n                                ctime: item.createTime //显示当前消息的发送时间\r\n                            })\r\n                        });\r\n\r\n                        this.msgList = _list;\r\n                    }\r\n                })\r\n                // this.msgList = [{\r\n                //     my: false,\r\n                //     id: 1, //根据这个来排序消息\r\n                //     type: 1, //1为文本，2为图片\r\n                //     msg: '你好!![呲牙]', //当type为1时这里是文本消息，当type2为2时这里要存放图片地址；后续会支持语音的显示\r\n                //     ctime: new Date().toLocaleString() //显示当前消息的发送时间\r\n                // },\r\n                //     {\r\n                //         my: true,\r\n                //         id: 2,\r\n                //         type: 1,\r\n                //         msg: '你也好。[害羞]',\r\n                //         ctime: new Date().toLocaleString()\r\n                //     }];\r\n            },\r\n            sendMsg() {\r\n                // 消息为空不做任何操作\r\n                if (this.msg === \"\") {\r\n                    return this.$message.warning(\"消息不能为空\");\r\n                }\r\n                // 显示消息 msg消息文本,my鉴别是谁发的消息(不能用俩个消息数组循环,否则消息不会穿插)\r\n                var msg = this.msg.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n                if (!msg) return;\r\n                this.msgList.push({\r\n                    msg: msg,\r\n                    my: true,\r\n                    type: 1\r\n                });\r\n                // 保证消息可见\r\n                // this.msgGo()\r\n                // 回答问题\r\n                this.msgSendAction(this.msg);\r\n                // 清除消息\r\n                this.msg = \"\"\r\n            },\r\n            msgSendAction: function (x) {\r\n                // 这里连接服务器获取答案\r\n                // 下面模拟请求\r\n                this.$api.post(\"im\", {\r\n                    toUser: this.userId,\r\n                    msg: x\r\n                }).then(res => {\r\n                    if (res.code === 200) {\r\n                        // 消息发送成功 加载loading\r\n                        this.msgLoad = true;\r\n                    }\r\n                })\r\n            },\r\n\r\n            getUnderData() {\r\n\r\n            },\r\n\r\n            getUpperData() {\r\n\r\n            },\r\n\r\n            //向上拉刷新\r\n            refresh(done) {\r\n                var me = this;\r\n                if (me.isUpperLaoding) {\r\n                    return;\r\n                }\r\n\r\n                if (me.isRefreshedAll) {\r\n                    done(true);\r\n                    me.isUpperLaoding = false;\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    this.getUpperData().then(function (data) {\r\n                        if (data.length === 0) {\r\n                            me.isRefreshedAll = true;\r\n                            done(true);\r\n                        } else {\r\n                            me.msgList = data.reverse().concat(me.msgList); //倒序合并\r\n                            done();\r\n                        }\r\n                    })\r\n                } catch (error) {\r\n                    console.error('wxChat: props \"getUpperData\" must return a promise object!')\r\n                }\r\n                me.isUpperLaoding = false;\r\n            },\r\n\r\n            //向下拉加载\r\n            infinite(done) {\r\n                var me = this;\r\n                if (me.isUnderLaoding) {\r\n                    return;\r\n                }\r\n                if (me.isLoadedAll) {\r\n                    done(true);\r\n                    me.isUnderLaoding = false;\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    this.getUnderData().then(function (data) {\r\n                        if (data === 0) {\r\n                            me.isLoadedAll = true;\r\n                            done(true);\r\n                        } else {\r\n                            done();\r\n                            me.msgList = me.msgList.concat(data); //直接合并\r\n                        }\r\n                    })\r\n                } catch (error) {\r\n                    console.error('wxChat: props \"getUnderData\" must return a promise object!')\r\n                }\r\n                me.isUnderLaoding = false;\r\n            }\r\n\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    >>> .el-card__body {\r\n        padding: 0;\r\n    }\r\n\r\n    .shadow {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        z-index: 100;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: #000;\r\n        opacity: .2;\r\n    }\r\n\r\n    .window {\r\n        min-width: 300px;\r\n        background: #F5F5F5;\r\n        overflow: hidden;\r\n        padding: 0;\r\n        height: 100%;\r\n        position: relative;\r\n        z-index: 101;\r\n    }\r\n\r\n    .w100 {\r\n        width: 100%;\r\n    }\r\n\r\n    .mt5 {\r\n        margin-top: 5px;\r\n    }\r\n\r\n    .mt10 {\r\n        margin-top: 10px;\r\n    }\r\n\r\n    .mt20 {\r\n        margin-top: 20px;\r\n    }\r\n\r\n    .mb10 {\r\n        margin-bottom: 10px;\r\n    }\r\n\r\n    .mb20 {\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .fs0 {\r\n        font-size: 0\r\n    }\r\n\r\n    .title {\r\n        background: #000;\r\n        text-align: center;\r\n        color: #fff;\r\n        width: 100%;\r\n        height: 50px;\r\n        line-height: 50px;\r\n        font-size: 14px;\r\n    }\r\n\r\n    .loading, .no-more {\r\n        text-align: center;\r\n        color: #b0b0b0;\r\n        line-height: 100px;\r\n    }\r\n\r\n    .no-more {\r\n        line-height: 60px;\r\n    }\r\n\r\n    .pull-right {\r\n        float: right;\r\n    }\r\n\r\n    .link-line {\r\n        text-decoration: underline;\r\n    }\r\n\r\n    .message {\r\n        /*height: 100%;*/\r\n        padding: 10px 15px;\r\n        /*overflow-y: scroll;*/\r\n        background-color: #F5F5F5;\r\n    }\r\n\r\n    .message li {\r\n        margin-bottom: 15px;\r\n        left: 0;\r\n        position: relative;\r\n        display: block;\r\n    }\r\n\r\n    .message .time {\r\n        margin: 10px 0;\r\n        text-align: center;\r\n    }\r\n\r\n    .message .text {\r\n        display: inline-block;\r\n        position: relative;\r\n        max-width: calc(100% - 75px);\r\n        min-height: 35px;\r\n        line-height: 2.1;\r\n        font-size: 15px;\r\n        padding: 6px 10px;\r\n        text-align: left;\r\n        word-break: break-all;\r\n        background-color: #fff;\r\n        color: #000;\r\n        border-radius: 4px;\r\n        box-shadow: 0px 1px 7px -5px #000;\r\n    }\r\n\r\n    .message .avatar {\r\n        float: left;\r\n        margin: 0 10px 0 0;\r\n    }\r\n\r\n    .message .time > span {\r\n        display: inline-block;\r\n        padding: 0 5px;\r\n        font-size: 12px;\r\n        color: #fff;\r\n        border-radius: 2px;\r\n        background-color: #DADADA;\r\n    }\r\n\r\n    .message .system > span {\r\n        padding: 4px 9px;\r\n        text-align: left;\r\n    }\r\n\r\n    .message .text:before {\r\n        content: \" \";\r\n        position: absolute;\r\n        top: 9px;\r\n        right: 100%;\r\n        border: 6px solid transparent;\r\n        border-right-color: #fff;\r\n    }\r\n\r\n    .message .self {\r\n        text-align: right;\r\n    }\r\n\r\n    .message .self .avatar {\r\n        float: right;\r\n        margin: 0 0 0 10px;\r\n    }\r\n\r\n    .message .self .text {\r\n        background-color: #9EEA6A;\r\n    }\r\n\r\n    .message .self .text:before {\r\n        right: inherit;\r\n        left: 100%;\r\n        border-right-color: transparent;\r\n        border-left-color: #9EEA6A;\r\n    }\r\n\r\n    .message .image {\r\n        max-width: 200px;\r\n    }\r\n\r\n    img.static-emotion-gif, img.static-emotion {\r\n        vertical-align: middle !important;\r\n    }\r\n\r\n    .an-move-left {\r\n        left: 0;\r\n        animation: moveLeft .7s ease;\r\n        -webkit-animation: moveLeft .7s ease;\r\n    }\r\n\r\n    .an-move-right {\r\n        left: 0;\r\n        animation: moveRight .7s ease;\r\n        -webkit-animation: moveRight .7s ease;\r\n    }\r\n\r\n    .bgnone {\r\n        background: none;\r\n    }\r\n\r\n    @keyframes moveRight {\r\n        0% {\r\n            left: -30px;\r\n            opacity: 0\r\n        }\r\n        100% {\r\n            left: 0;\r\n            opacity: 1\r\n        }\r\n    }\r\n\r\n    @-webkit-keyframes moveRight {\r\n        0% {\r\n            left: -50px;\r\n            opacity: 0\r\n        }\r\n        100% {\r\n            left: 0px;\r\n            opacity: 1\r\n        }\r\n    }\r\n\r\n    @keyframes moveLeft {\r\n        0% {\r\n            left: 20px;\r\n            opacity: 0\r\n        }\r\n        100% {\r\n            left: 0px;\r\n            opacity: 1\r\n        }\r\n    }\r\n\r\n    @-webkit-keyframes moveLeft {\r\n        0% {\r\n            left: 20px;\r\n            opacity: 0\r\n        }\r\n        100% {\r\n            left: 0px;\r\n            opacity: 1\r\n        }\r\n    }\r\n\r\n    @media (max-width: 367px) {\r\n        .fzDInfo {\r\n            width: 82%;\r\n        }\r\n    }\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/user/components"}]}