{"remainingRequest":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js!G:\\RQDL\\base\\backend-admin\\src\\store\\modules\\menu.js","dependencies":[{"path":"G:\\RQDL\\base\\backend-admin\\src\\store\\modules\\menu.js","mtime":1620715077817},{"path":"G:\\RQDL\\base\\backend-admin\\babel.config.js","mtime":1620715077731},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJHOi9SUURML2Jhc2UvYmFja2VuZC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRzovUlFETC9iYXNlL2JhY2tlbmQtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJHOi9SUURML2Jhc2UvYmFja2VuZC1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgeyBkZWVwQ2xvbmUgfSBmcm9tICdAL3V0aWwnOwoKZnVuY3Rpb24gaGFzUGVybWlzc2lvbihwZXJtaXNzaW9ucywgcm91dGUpIHsKICB2YXIgaXNBdXRoID0gZmFsc2U7CgogIGlmIChyb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEuYXV0aCkgewogICAgaXNBdXRoID0gcGVybWlzc2lvbnMuc29tZShmdW5jdGlvbiAoYXV0aCkgewogICAgICBpZiAodHlwZW9mIHJvdXRlLm1ldGEuYXV0aCA9PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiByb3V0ZS5tZXRhLmF1dGggPT09IGF1dGg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHJvdXRlLm1ldGEuYXV0aC5zb21lKGZ1bmN0aW9uIChyb3V0ZUF1dGgpIHsKICAgICAgICAgIHJldHVybiByb3V0ZUF1dGggPT09IGF1dGg7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0gZWxzZSB7CiAgICBpc0F1dGggPSB0cnVlOwogIH0KCiAgcmV0dXJuIGlzQXV0aDsKfQoKZnVuY3Rpb24gZmlsdGVyQXN5bmNSb3V0ZXMocm91dGVzLCBwZXJtaXNzaW9ucykgewogIHZhciByZXMgPSBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgIHZhciB0bXAgPSBfb2JqZWN0U3ByZWFkKHt9LCByb3V0ZSk7CgogICAgaWYgKGhhc1Blcm1pc3Npb24ocGVybWlzc2lvbnMsIHRtcCkpIHsKICAgICAgaWYgKHRtcC5jaGlsZHJlbikgewogICAgICAgIHRtcC5jaGlsZHJlbiA9IGZpbHRlckFzeW5jUm91dGVzKHRtcC5jaGlsZHJlbiwgcGVybWlzc2lvbnMpOwogICAgICAgIHRtcC5jaGlsZHJlbi5sZW5ndGggJiYgcmVzLnB1c2godG1wKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXMucHVzaCh0bXApOwogICAgICB9CiAgICB9CiAgfSk7CiAgcmV0dXJuIHJlczsKfSAvLyDlsIblpJrlsYLltYzlpZfot6/nlLHlpITnkIbmiJDlubPnuqcKCgpmdW5jdGlvbiBmbGF0QXN5bmNSb3V0ZXMocm91dGVzLCBicmVhZGNydW1iKSB7CiAgdmFyIGJhc2VVcmwgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICcnOwogIHZhciByZXMgPSBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgIHZhciB0bXAgPSBfb2JqZWN0U3ByZWFkKHt9LCByb3V0ZSk7CgogICAgaWYgKHRtcC5jaGlsZHJlbikgewogICAgICB2YXIgY2hpbGRyZW5CYXNlVXJsID0gJyc7CgogICAgICBpZiAoYmFzZVVybCA9PT0gJycpIHsKICAgICAgICBjaGlsZHJlbkJhc2VVcmwgPSB0bXAucGF0aDsKICAgICAgfSBlbHNlIGlmICh0bXAucGF0aCAhPT0gJycpIHsKICAgICAgICBjaGlsZHJlbkJhc2VVcmwgPSAiIi5jb25jYXQoYmFzZVVybCwgIi8iKS5jb25jYXQodG1wLnBhdGgpOwogICAgICB9CgogICAgICB2YXIgY2hpbGRyZW5CcmVhZGNydW1iID0gZGVlcENsb25lKGJyZWFkY3J1bWIpOwoKICAgICAgaWYgKHJvdXRlLm1ldGEuYnJlYWRjcnVtYiAhPT0gZmFsc2UpIHsKICAgICAgICBjaGlsZHJlbkJyZWFkY3J1bWIucHVzaCh7CiAgICAgICAgICBwYXRoOiBjaGlsZHJlbkJhc2VVcmwsCiAgICAgICAgICB0aXRsZTogcm91dGUubWV0YS50aXRsZQogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgdG1wUm91dGUgPSBkZWVwQ2xvbmUocm91dGUpOwogICAgICB0bXBSb3V0ZS5wYXRoID0gY2hpbGRyZW5CYXNlVXJsOwogICAgICB0bXBSb3V0ZS5tZXRhLmJyZWFkY3J1bWJOZXN0ZSA9IGNoaWxkcmVuQnJlYWRjcnVtYjsKICAgICAgZGVsZXRlIHRtcFJvdXRlLmNoaWxkcmVuOwogICAgICByZXMucHVzaCh0bXBSb3V0ZSk7CiAgICAgIHZhciBjaGlsZHJlblJvdXRlcyA9IGZsYXRBc3luY1JvdXRlcyh0bXAuY2hpbGRyZW4sIGNoaWxkcmVuQnJlYWRjcnVtYiwgY2hpbGRyZW5CYXNlVXJsKTsKICAgICAgY2hpbGRyZW5Sb3V0ZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgLy8g5aaC5p6cIHBhdGgg5LiA5qC35YiZ6KaG55uW77yM5Zug5Li65a2Q6Lev55Sx55qEIHBhdGgg5Y+v6IO96K6+572u5Li656m677yM5a+86Ie05ZKM54i26Lev55Sx5LiA5qC377yM55u05o6l5rOo5YaM5Lya5o+Q56S66Lev55Sx6YeN5aSNCiAgICAgICAgaWYgKHJlcy5zb21lKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gdi5wYXRoID09PSBpdGVtLnBhdGg7CiAgICAgICAgfSkpIHsKICAgICAgICAgIHJlcy5mb3JFYWNoKGZ1bmN0aW9uICh2LCBpKSB7CiAgICAgICAgICAgIGlmICh2LnBhdGggPT09IGl0ZW0ucGF0aCkgewogICAgICAgICAgICAgIHJlc1tpXSA9IGl0ZW07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXMucHVzaChpdGVtKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKGJhc2VVcmwgIT09ICcnKSB7CiAgICAgICAgaWYgKHRtcC5wYXRoICE9PSAnJykgewogICAgICAgICAgdG1wLnBhdGggPSAiIi5jb25jYXQoYmFzZVVybCwgIi8iKS5jb25jYXQodG1wLnBhdGgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0bXAucGF0aCA9IGJhc2VVcmw7CiAgICAgICAgfQogICAgICB9IC8vIOWkhOeQhumdouWMheWxkeWvvOiIqgoKCiAgICAgIHZhciB0bXBCcmVhZGNydW1iID0gZGVlcENsb25lKGJyZWFkY3J1bWIpOwoKICAgICAgaWYgKHRtcC5tZXRhLmJyZWFkY3J1bWIgIT09IGZhbHNlKSB7CiAgICAgICAgdG1wQnJlYWRjcnVtYi5wdXNoKHsKICAgICAgICAgIHBhdGg6IHRtcC5wYXRoLAogICAgICAgICAgdGl0bGU6IHRtcC5tZXRhLnRpdGxlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRtcC5tZXRhLmJyZWFkY3J1bWJOZXN0ZSA9IHRtcEJyZWFkY3J1bWI7CiAgICAgIHJlcy5wdXNoKHRtcCk7CiAgICB9CiAgfSk7CiAgcmV0dXJuIHJlczsKfQoKdmFyIHN0YXRlID0gewogIGlzR2VuZXJhdGU6IGZhbHNlLAogIHJvdXRlczogW10sCiAgaGVhZGVyQWN0aXZlZDogMAp9Owp2YXIgZ2V0dGVycyA9IHsKICBzaWRlYmFyUm91dGVzOiBmdW5jdGlvbiBzaWRlYmFyUm91dGVzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUucm91dGVzLmxlbmd0aCA+IDAgPyBzdGF0ZS5yb3V0ZXNbc3RhdGUuaGVhZGVyQWN0aXZlZF0uY2hpbGRyZW4gOiBbXTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIOagueaNruadg+mZkOWKqOaAgeeUn+aIkOi3r+eUsQogIGdlbmVyYXRlUm91dGVzOiBmdW5jdGlvbiBnZW5lcmF0ZVJvdXRlcyhfcmVmLCBkYXRhKSB7CiAgICB2YXIgcm9vdFN0YXRlID0gX3JlZi5yb290U3RhdGUsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLAogICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hc3luYy1wcm9taXNlLWV4ZWN1dG9yCiAgICByZXR1cm4gbmV3IFByb21pc2UoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNvbHZlKSB7CiAgICAgICAgdmFyIGFjY2Vzc2VkUm91dGVzLCBwZXJtaXNzaW9ucywgcm91dGVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghcm9vdFN0YXRlLnNldHRpbmdzLm9wZW5QZXJtaXNzaW9uKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgndXNlci9nZXRQZXJtaXNzaW9ucycsIG51bGwsIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHBlcm1pc3Npb25zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwZXJtaXNzaW9ucycsIHBlcm1pc3Npb25zKTsKICAgICAgICAgICAgICAgIGFjY2Vzc2VkUm91dGVzID0gZmlsdGVyQXN5bmNSb3V0ZXMoZGF0YS5hc3luY1JvdXRlcywgcGVybWlzc2lvbnMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgLy8g5pyq5byA5ZCvCiAgICAgICAgICAgICAgICBhY2Nlc3NlZFJvdXRlcyA9IGRhdGEuYXN5bmNSb3V0ZXM7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0Um91dGVzJywgYWNjZXNzZWRSb3V0ZXMpOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRIZWFkZXJOYXYnLCBkYXRhLmN1cnJlbnRQYXRoKTsKICAgICAgICAgICAgICAgIHJvdXRlcyA9IFtdOwogICAgICAgICAgICAgICAgYWNjZXNzZWRSb3V0ZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJvdXRlcy5wdXNoLmFwcGx5KHJvdXRlcywgX3RvQ29uc3VtYWJsZUFycmF5KGl0ZW0uY2hpbGRyZW4pKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmIChyb290U3RhdGUuc2V0dGluZ3MuZW5hYmxlRmxhdFJvdXRlcykgewogICAgICAgICAgICAgICAgICByb3V0ZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHsKICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uY2hpbGRyZW4gPSBmbGF0QXN5bmNSb3V0ZXMoaXRlbS5jaGlsZHJlbiwgW3sKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogaXRlbS5wYXRoLAogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS5tZXRhLnRpdGxlCiAgICAgICAgICAgICAgICAgICAgICB9XSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXNvbHZlKHJvdXRlcyk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpKTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgaW52YWxpZFJvdXRlczogZnVuY3Rpb24gaW52YWxpZFJvdXRlcyhzdGF0ZSkgewogICAgY29uc29sZS5sb2coIuaMieaXtuWPkeWFrOWPuOeahOWFrOWPuOWPkeeahOinhOWIkuaYr+eahOazleinhOeahOWPjOaWueWQhOivneS4jeWkmuivtOazleinhOmDqCIpOwogICAgc3RhdGUuaXNHZW5lcmF0ZSA9IGZhbHNlOwogICAgc3RhdGUuaGVhZGVyQWN0aXZlZCA9IDA7CiAgfSwKICBzZXRSb3V0ZXM6IGZ1bmN0aW9uIHNldFJvdXRlcyhzdGF0ZSwgcm91dGVzKSB7CiAgICBzdGF0ZS5pc0dlbmVyYXRlID0gdHJ1ZTsKICAgIHZhciBuZXdSb3V0ZXMgPSBkZWVwQ2xvbmUocm91dGVzKTsKICAgIHN0YXRlLnJvdXRlcyA9IG5ld1JvdXRlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoICE9PSAwOwogICAgfSk7CiAgfSwKICAvLyDmoLnmja7ot6/nlLHliKTmlq3lsZ7kuo7lk6rkuKrlpLTpg6jlr7zoiKoKICBzZXRIZWFkZXJOYXY6IGZ1bmN0aW9uIHNldEhlYWRlck5hdihzdGF0ZSwgcGF0aCkgewogICAgc3RhdGUucm91dGVzLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4uc29tZShmdW5jdGlvbiAocikgewogICAgICAgIHJldHVybiBwYXRoLmluZGV4T2Yoci5wYXRoICsgJy8nKSA9PT0gMCB8fCBwYXRoID09PSByLnBhdGg7CiAgICAgIH0pKSB7CiAgICAgICAgc3RhdGUuaGVhZGVyQWN0aXZlZCA9IGluZGV4OwogICAgICB9CiAgICB9KTsKICB9LAogIC8vIOWIh+aNouWktOmDqOWvvOiIqgogIHN3aXRjaEhlYWRlckFjdGl2ZWQ6IGZ1bmN0aW9uIHN3aXRjaEhlYWRlckFjdGl2ZWQoc3RhdGUsIGluZGV4KSB7CiAgICBzdGF0ZS5oZWFkZXJBY3RpdmVkID0gaW5kZXg7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgYWN0aW9uczogYWN0aW9ucywKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIG11dGF0aW9uczogbXV0YXRpb25zCn07"},{"version":3,"sources":["G:/RQDL/base/backend-admin/src/store/modules/menu.js"],"names":["deepClone","hasPermission","permissions","route","isAuth","meta","auth","some","routeAuth","filterAsyncRoutes","routes","res","forEach","tmp","children","length","push","flatAsyncRoutes","breadcrumb","baseUrl","childrenBaseUrl","path","childrenBreadcrumb","title","tmpRoute","breadcrumbNeste","childrenRoutes","map","item","v","i","tmpBreadcrumb","state","isGenerate","headerActived","getters","sidebarRoutes","actions","generateRoutes","data","rootState","dispatch","commit","Promise","resolve","settings","openPermission","root","console","log","accessedRoutes","asyncRoutes","currentPath","enableFlatRoutes","mutations","invalidRoutes","setRoutes","newRoutes","filter","setHeaderNav","index","r","indexOf","switchHeaderActived","namespaced"],"mappings":";;;;;;;;;AAAA,SAASA,SAAT,QAA0B,QAA1B;;AAEA,SAASC,aAAT,CAAuBC,WAAvB,EAAoCC,KAApC,EAA2C;AACvC,MAAIC,MAAM,GAAG,KAAb;;AACA,MAAID,KAAK,CAACE,IAAN,IAAcF,KAAK,CAACE,IAAN,CAAWC,IAA7B,EAAmC;AAC/BF,IAAAA,MAAM,GAAGF,WAAW,CAACK,IAAZ,CAAiB,UAAAD,IAAI,EAAI;AAC9B,UAAI,OAAOH,KAAK,CAACE,IAAN,CAAWC,IAAlB,IAA0B,QAA9B,EAAwC;AACpC,eAAOH,KAAK,CAACE,IAAN,CAAWC,IAAX,KAAoBA,IAA3B;AACH,OAFD,MAEO;AACH,eAAOH,KAAK,CAACE,IAAN,CAAWC,IAAX,CAAgBC,IAAhB,CAAqB,UAAAC,SAAS,EAAI;AACrC,iBAAOA,SAAS,KAAKF,IAArB;AACH,SAFM,CAAP;AAGH;AACJ,KARQ,CAAT;AASH,GAVD,MAUO;AACHF,IAAAA,MAAM,GAAG,IAAT;AACH;;AACD,SAAOA,MAAP;AACH;;AAED,SAASK,iBAAT,CAA2BC,MAA3B,EAAmCR,WAAnC,EAAgD;AAC5C,MAAMS,GAAG,GAAG,EAAZ;AACAD,EAAAA,MAAM,CAACE,OAAP,CAAe,UAAAT,KAAK,EAAI;AACpB,QAAMU,GAAG,qBAAQV,KAAR,CAAT;;AACA,QAAIF,aAAa,CAACC,WAAD,EAAcW,GAAd,CAAjB,EAAqC;AACjC,UAAIA,GAAG,CAACC,QAAR,EAAkB;AACdD,QAAAA,GAAG,CAACC,QAAJ,GAAeL,iBAAiB,CAACI,GAAG,CAACC,QAAL,EAAeZ,WAAf,CAAhC;AACAW,QAAAA,GAAG,CAACC,QAAJ,CAAaC,MAAb,IAAuBJ,GAAG,CAACK,IAAJ,CAASH,GAAT,CAAvB;AACH,OAHD,MAGO;AACHF,QAAAA,GAAG,CAACK,IAAJ,CAASH,GAAT;AACH;AACJ;AACJ,GAVD;AAWA,SAAOF,GAAP;AACH,C,CAED;;;AACA,SAASM,eAAT,CAAyBP,MAAzB,EAAiCQ,UAAjC,EAA2D;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AACvD,MAAIR,GAAG,GAAG,EAAV;AACAD,EAAAA,MAAM,CAACE,OAAP,CAAe,UAAAT,KAAK,EAAI;AACpB,QAAMU,GAAG,qBAAQV,KAAR,CAAT;;AACA,QAAIU,GAAG,CAACC,QAAR,EAAkB;AACd,UAAIM,eAAe,GAAG,EAAtB;;AACA,UAAID,OAAO,KAAK,EAAhB,EAAoB;AAChBC,QAAAA,eAAe,GAAGP,GAAG,CAACQ,IAAtB;AACH,OAFD,MAEO,IAAIR,GAAG,CAACQ,IAAJ,KAAa,EAAjB,EAAqB;AACxBD,QAAAA,eAAe,aAAMD,OAAN,cAAiBN,GAAG,CAACQ,IAArB,CAAf;AACH;;AACD,UAAIC,kBAAkB,GAAGtB,SAAS,CAACkB,UAAD,CAAlC;;AACA,UAAIf,KAAK,CAACE,IAAN,CAAWa,UAAX,KAA0B,KAA9B,EAAqC;AACjCI,QAAAA,kBAAkB,CAACN,IAAnB,CAAwB;AACpBK,UAAAA,IAAI,EAAED,eADc;AAEpBG,UAAAA,KAAK,EAAEpB,KAAK,CAACE,IAAN,CAAWkB;AAFE,SAAxB;AAIH;;AACD,UAAIC,QAAQ,GAAGxB,SAAS,CAACG,KAAD,CAAxB;AACAqB,MAAAA,QAAQ,CAACH,IAAT,GAAgBD,eAAhB;AACAI,MAAAA,QAAQ,CAACnB,IAAT,CAAcoB,eAAd,GAAgCH,kBAAhC;AACA,aAAOE,QAAQ,CAACV,QAAhB;AACAH,MAAAA,GAAG,CAACK,IAAJ,CAASQ,QAAT;AACA,UAAIE,cAAc,GAAGT,eAAe,CAACJ,GAAG,CAACC,QAAL,EAAeQ,kBAAf,EAAmCF,eAAnC,CAApC;AACAM,MAAAA,cAAc,CAACC,GAAf,CAAmB,UAAAC,IAAI,EAAI;AACvB;AACA,YAAIjB,GAAG,CAACJ,IAAJ,CAAS,UAAAsB,CAAC;AAAA,iBAAIA,CAAC,CAACR,IAAF,KAAWO,IAAI,CAACP,IAApB;AAAA,SAAV,CAAJ,EAAyC;AACrCV,UAAAA,GAAG,CAACC,OAAJ,CAAY,UAACiB,CAAD,EAAIC,CAAJ,EAAU;AAClB,gBAAID,CAAC,CAACR,IAAF,KAAWO,IAAI,CAACP,IAApB,EAA0B;AACtBV,cAAAA,GAAG,CAACmB,CAAD,CAAH,GAASF,IAAT;AACH;AACJ,WAJD;AAKH,SAND,MAMO;AACHjB,UAAAA,GAAG,CAACK,IAAJ,CAASY,IAAT;AACH;AACJ,OAXD;AAYH,KAhCD,MAgCO;AACH,UAAIT,OAAO,KAAK,EAAhB,EAAoB;AAChB,YAAIN,GAAG,CAACQ,IAAJ,KAAa,EAAjB,EAAqB;AACjBR,UAAAA,GAAG,CAACQ,IAAJ,aAAcF,OAAd,cAAyBN,GAAG,CAACQ,IAA7B;AACH,SAFD,MAEO;AACHR,UAAAA,GAAG,CAACQ,IAAJ,GAAWF,OAAX;AACH;AACJ,OAPE,CAQH;;;AACA,UAAIY,aAAa,GAAG/B,SAAS,CAACkB,UAAD,CAA7B;;AACA,UAAIL,GAAG,CAACR,IAAJ,CAASa,UAAT,KAAwB,KAA5B,EAAmC;AAC/Ba,QAAAA,aAAa,CAACf,IAAd,CAAmB;AACfK,UAAAA,IAAI,EAAER,GAAG,CAACQ,IADK;AAEfE,UAAAA,KAAK,EAAEV,GAAG,CAACR,IAAJ,CAASkB;AAFD,SAAnB;AAIH;;AACDV,MAAAA,GAAG,CAACR,IAAJ,CAASoB,eAAT,GAA2BM,aAA3B;AACApB,MAAAA,GAAG,CAACK,IAAJ,CAASH,GAAT;AACH;AACJ,GArDD;AAsDA,SAAOF,GAAP;AACH;;AAED,IAAMqB,KAAK,GAAG;AACVC,EAAAA,UAAU,EAAE,KADF;AAEVvB,EAAAA,MAAM,EAAE,EAFE;AAGVwB,EAAAA,aAAa,EAAE;AAHL,CAAd;AAMA,IAAMC,OAAO,GAAG;AACZC,EAAAA,aAAa,EAAE,uBAAAJ,KAAK,EAAI;AACpB,WAAOA,KAAK,CAACtB,MAAN,CAAaK,MAAb,GAAsB,CAAtB,GAA0BiB,KAAK,CAACtB,MAAN,CAAasB,KAAK,CAACE,aAAnB,EAAkCpB,QAA5D,GAAuE,EAA9E;AACH;AAHW,CAAhB;AAMA,IAAMuB,OAAO,GAAG;AACZ;AACAC,EAAAA,cAFY,gCAEwCC,IAFxC,EAE8C;AAAA,QAA1CC,SAA0C,QAA1CA,SAA0C;AAAA,QAA/BC,QAA+B,QAA/BA,QAA+B;AAAA,QAArBC,MAAqB,QAArBA,MAAqB;AAAA,QAAdV,KAAc,QAAdA,KAAc;AACtD;AACA,WAAO,IAAIW,OAAJ;AAAA,0EAAY,iBAAMC,OAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAGXJ,SAAS,CAACK,QAAV,CAAmBC,cAHR;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAIeL,QAAQ,CAAC,qBAAD,EAAwB,IAAxB,EAA8B;AAAEM,kBAAAA,IAAI,EAAE;AAAR,iBAA9B,CAJvB;;AAAA;AAIL7C,gBAAAA,WAJK;AAKX8C,gBAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0B/C,WAA1B;AACAgD,gBAAAA,cAAc,GAAGzC,iBAAiB,CAAC8B,IAAI,CAACY,WAAN,EAAmBjD,WAAnB,CAAlC;AANW;AAAA;;AAAA;AAQX;AACAgD,gBAAAA,cAAc,GAAGX,IAAI,CAACY,WAAtB;;AATW;AAWfT,gBAAAA,MAAM,CAAC,WAAD,EAAcQ,cAAd,CAAN;AACAR,gBAAAA,MAAM,CAAC,cAAD,EAAiBH,IAAI,CAACa,WAAtB,CAAN;AACI1C,gBAAAA,MAbW,GAaF,EAbE;AAcfwC,gBAAAA,cAAc,CAACvB,GAAf,CAAmB,UAAAC,IAAI,EAAI;AACvBlB,kBAAAA,MAAM,CAACM,IAAP,OAAAN,MAAM,qBAASkB,IAAI,CAACd,QAAd,EAAN;AACH,iBAFD;;AAGA,oBAAI0B,SAAS,CAACK,QAAV,CAAmBQ,gBAAvB,EAAyC;AACrC3C,kBAAAA,MAAM,CAACiB,GAAP,CAAW,UAAAC,IAAI,EAAI;AACf,wBAAIA,IAAI,CAACd,QAAT,EAAmB;AACfc,sBAAAA,IAAI,CAACd,QAAL,GAAgBG,eAAe,CAACW,IAAI,CAACd,QAAN,EAAgB,CAAC;AAC5CO,wBAAAA,IAAI,EAAEO,IAAI,CAACP,IADiC;AAE5CE,wBAAAA,KAAK,EAAEK,IAAI,CAACvB,IAAL,CAAUkB;AAF2B,uBAAD,CAAhB,CAA/B;AAIH;AACJ,mBAPD;AAQH;;AACDqB,gBAAAA,OAAO,CAAClC,MAAD,CAAP;;AA3Be;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAZ;;AAAA;AAAA;AAAA;AAAA,QAAP;AA6BH;AAjCW,CAAhB;AAoCA,IAAM4C,SAAS,GAAG;AACdC,EAAAA,aADc,yBACAvB,KADA,EACO;AACjBgB,IAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAjB,IAAAA,KAAK,CAACC,UAAN,GAAmB,KAAnB;AACAD,IAAAA,KAAK,CAACE,aAAN,GAAsB,CAAtB;AACH,GALa;AAMdsB,EAAAA,SANc,qBAMJxB,KANI,EAMGtB,MANH,EAMW;AACrBsB,IAAAA,KAAK,CAACC,UAAN,GAAmB,IAAnB;AACA,QAAIwB,SAAS,GAAGzD,SAAS,CAACU,MAAD,CAAzB;AACAsB,IAAAA,KAAK,CAACtB,MAAN,GAAe+C,SAAS,CAACC,MAAV,CAAiB,UAAA9B,IAAI,EAAI;AACpC,aAAOA,IAAI,CAACd,QAAL,CAAcC,MAAd,KAAyB,CAAhC;AACH,KAFc,CAAf;AAGH,GAZa;AAad;AACA4C,EAAAA,YAdc,wBAcD3B,KAdC,EAcMX,IAdN,EAcY;AACtBW,IAAAA,KAAK,CAACtB,MAAN,CAAaiB,GAAb,CAAiB,UAACC,IAAD,EAAOgC,KAAP,EAAiB;AAC9B,UACIhC,IAAI,CAACd,QAAL,CAAcP,IAAd,CAAmB,UAAAsD,CAAC,EAAI;AACpB,eAAOxC,IAAI,CAACyC,OAAL,CAAaD,CAAC,CAACxC,IAAF,GAAS,GAAtB,MAA+B,CAA/B,IAAoCA,IAAI,KAAKwC,CAAC,CAACxC,IAAtD;AACH,OAFD,CADJ,EAIE;AACEW,QAAAA,KAAK,CAACE,aAAN,GAAsB0B,KAAtB;AACH;AACJ,KARD;AASH,GAxBa;AAyBd;AACAG,EAAAA,mBA1Bc,+BA0BM/B,KA1BN,EA0Ba4B,KA1Bb,EA0BoB;AAC9B5B,IAAAA,KAAK,CAACE,aAAN,GAAsB0B,KAAtB;AACH;AA5Ba,CAAlB;AA+BA,eAAe;AACXI,EAAAA,UAAU,EAAE,IADD;AAEXhC,EAAAA,KAAK,EAALA,KAFW;AAGXK,EAAAA,OAAO,EAAPA,OAHW;AAIXF,EAAAA,OAAO,EAAPA,OAJW;AAKXmB,EAAAA,SAAS,EAATA;AALW,CAAf","sourcesContent":["import { deepClone } from '@/util'\r\n\r\nfunction hasPermission(permissions, route) {\r\n    let isAuth = false\r\n    if (route.meta && route.meta.auth) {\r\n        isAuth = permissions.some(auth => {\r\n            if (typeof route.meta.auth == 'string') {\r\n                return route.meta.auth === auth\r\n            } else {\r\n                return route.meta.auth.some(routeAuth => {\r\n                    return routeAuth === auth\r\n                })\r\n            }\r\n        })\r\n    } else {\r\n        isAuth = true\r\n    }\r\n    return isAuth\r\n}\r\n\r\nfunction filterAsyncRoutes(routes, permissions) {\r\n    const res = []\r\n    routes.forEach(route => {\r\n        const tmp = { ...route }\r\n        if (hasPermission(permissions, tmp)) {\r\n            if (tmp.children) {\r\n                tmp.children = filterAsyncRoutes(tmp.children, permissions)\r\n                tmp.children.length && res.push(tmp)\r\n            } else {\r\n                res.push(tmp)\r\n            }\r\n        }\r\n    })\r\n    return res\r\n}\r\n\r\n// 将多层嵌套路由处理成平级\r\nfunction flatAsyncRoutes(routes, breadcrumb, baseUrl = '') {\r\n    let res = []\r\n    routes.forEach(route => {\r\n        const tmp = { ...route }\r\n        if (tmp.children) {\r\n            let childrenBaseUrl = ''\r\n            if (baseUrl === '') {\r\n                childrenBaseUrl = tmp.path\r\n            } else if (tmp.path !== '') {\r\n                childrenBaseUrl = `${baseUrl}/${tmp.path}`\r\n            }\r\n            let childrenBreadcrumb = deepClone(breadcrumb)\r\n            if (route.meta.breadcrumb !== false) {\r\n                childrenBreadcrumb.push({\r\n                    path: childrenBaseUrl,\r\n                    title: route.meta.title\r\n                })\r\n            }\r\n            let tmpRoute = deepClone(route)\r\n            tmpRoute.path = childrenBaseUrl\r\n            tmpRoute.meta.breadcrumbNeste = childrenBreadcrumb\r\n            delete tmpRoute.children\r\n            res.push(tmpRoute)\r\n            let childrenRoutes = flatAsyncRoutes(tmp.children, childrenBreadcrumb, childrenBaseUrl)\r\n            childrenRoutes.map(item => {\r\n                // 如果 path 一样则覆盖，因为子路由的 path 可能设置为空，导致和父路由一样，直接注册会提示路由重复\r\n                if (res.some(v => v.path === item.path)) {\r\n                    res.forEach((v, i) => {\r\n                        if (v.path === item.path) {\r\n                            res[i] = item\r\n                        }\r\n                    })\r\n                } else {\r\n                    res.push(item)\r\n                }\r\n            })\r\n        } else {\r\n            if (baseUrl !== '') {\r\n                if (tmp.path !== '') {\r\n                    tmp.path = `${baseUrl}/${tmp.path}`\r\n                } else {\r\n                    tmp.path = baseUrl\r\n                }\r\n            }\r\n            // 处理面包屑导航\r\n            let tmpBreadcrumb = deepClone(breadcrumb)\r\n            if (tmp.meta.breadcrumb !== false) {\r\n                tmpBreadcrumb.push({\r\n                    path: tmp.path,\r\n                    title: tmp.meta.title\r\n                })\r\n            }\r\n            tmp.meta.breadcrumbNeste = tmpBreadcrumb\r\n            res.push(tmp)\r\n        }\r\n    })\r\n    return res\r\n}\r\n\r\nconst state = {\r\n    isGenerate: false,\r\n    routes: [],\r\n    headerActived: 0\r\n}\r\n\r\nconst getters = {\r\n    sidebarRoutes: state => {\r\n        return state.routes.length > 0 ? state.routes[state.headerActived].children : []\r\n    }\r\n}\r\n\r\nconst actions = {\r\n    // 根据权限动态生成路由\r\n    generateRoutes({rootState, dispatch, commit,state}, data) {\r\n        // eslint-disable-next-line no-async-promise-executor\r\n        return new Promise(async resolve => {\r\n            let accessedRoutes\r\n            // 判断权限功能是否开启\r\n            if (rootState.settings.openPermission) {\r\n                const permissions = await dispatch('user/getPermissions', null, { root: true });\r\n                console.log('permissions',permissions)\r\n                accessedRoutes = filterAsyncRoutes(data.asyncRoutes, permissions)\r\n            } else {\r\n                // 未开启\r\n                accessedRoutes = data.asyncRoutes;\r\n            }\r\n            commit('setRoutes', accessedRoutes)\r\n            commit('setHeaderNav', data.currentPath)\r\n            let routes = []\r\n            accessedRoutes.map(item => {\r\n                routes.push(...item.children)\r\n            })\r\n            if (rootState.settings.enableFlatRoutes) {\r\n                routes.map(item => {\r\n                    if (item.children) {\r\n                        item.children = flatAsyncRoutes(item.children, [{\r\n                            path: item.path,\r\n                            title: item.meta.title\r\n                        }])\r\n                    }\r\n                })\r\n            }\r\n            resolve(routes)\r\n        })\r\n    }\r\n}\r\n\r\nconst mutations = {\r\n    invalidRoutes(state) {\r\n        console.log(\"按时发公司的公司发的规划是的法规的双方各话不多说法规部\")\r\n        state.isGenerate = false\r\n        state.headerActived = 0\r\n    },\r\n    setRoutes(state, routes) {\r\n        state.isGenerate = true\r\n        let newRoutes = deepClone(routes)\r\n        state.routes = newRoutes.filter(item => {\r\n            return item.children.length !== 0\r\n        })\r\n    },\r\n    // 根据路由判断属于哪个头部导航\r\n    setHeaderNav(state, path) {\r\n        state.routes.map((item, index) => {\r\n            if (\r\n                item.children.some(r => {\r\n                    return path.indexOf(r.path + '/') === 0 || path === r.path\r\n                })\r\n            ) {\r\n                state.headerActived = index\r\n            }\r\n        })\r\n    },\r\n    // 切换头部导航\r\n    switchHeaderActived(state, index) {\r\n        state.headerActived = index\r\n    }\r\n}\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state,\r\n    actions,\r\n    getters,\r\n    mutations\r\n}\r\n"]}]}