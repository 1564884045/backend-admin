{"remainingRequest":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js!G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\RQDL\\base\\backend-admin\\src\\views\\conf\\config-poster.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\RQDL\\base\\backend-admin\\src\\views\\conf\\config-poster.vue","mtime":1620715077855},{"path":"G:\\RQDL\\base\\backend-admin\\babel.config.js","mtime":1620715077731},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5wYXJzZS1pbnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgSW1hZ2VzVXBsb2FkIGZyb20gIkAvY29tcG9uZW50cy9JbWFnZXNVcGxvYWQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImNvbmZpZy1wb3N0ZXIiLAogIGNvbXBvbmVudHM6IHsKICAgIEltYWdlc1VwbG9hZDogSW1hZ2VzVXBsb2FkCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHNoYXJlSW5mbzogewogICAgICAgIGNvdmVyOiAiIiwKICAgICAgICBsb2dvczogW10sCiAgICAgICAgcG9zdGVyQXJyOiBbXSwKICAgICAgICB0aXRsZTogIiIKICAgICAgfSwKICAgICAgdXBsb2FkVXJsOiAnJywKICAgICAgZGlhbG9nSW1hZ2VVcmw6ICcnLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgdXBsb2FkRmlsZUxpc3Q6IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy51cGxvYWRVcmwgPSB0aGlzLiRhcGkuYmFzZVVybCArICcvdXBsb2FkLycgKyB0aGlzLiRzdG9yZS5zdGF0ZS5zaG9wLmlkICsgJy9zaGFyZSc7CiAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgdGhpcy4kYXBpLmdldCgiY29tcGFueS9jb25mIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgX3RoaXMuc2hhcmVJbmZvID0gSlNPTi5wYXJzZShyZXMuZGF0YS5zaGFyZUluZm8pIHx8IHsKICAgICAgICAgIGNvdmVyOiAiIiwKICAgICAgICAgIGxvZ286ICIiLAogICAgICAgICAgcG9zdGVyQXJyOiBbXSwKICAgICAgICAgIHRpdGxlOiAiIgogICAgICAgIH07CgogICAgICAgIGlmIChfdGhpcy5zaGFyZUluZm8gJiYgX3RoaXMuc2hhcmVJbmZvLnBvc3RlckFycikgewogICAgICAgICAgdmFyIF9wYXRoQXJyID0gX3RoaXMuc2hhcmVJbmZvLnBvc3RlckFyciB8fCBbXTsKCiAgICAgICAgICB2YXIgX3Nob3dMaXN0ID0gW107CgogICAgICAgICAgX3BhdGhBcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBfc2hvd0xpc3QucHVzaCh7CiAgICAgICAgICAgICAgdXJsOiBfdGhpcy4kYXBpLmJhc2VVcmwgKyBpdGVtLAogICAgICAgICAgICAgIHBhdGg6IGl0ZW0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpcy51cGxvYWRGaWxlTGlzdCA9IF9zaG93TGlzdDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX2xpc3QgPSB0aGlzLiRyZWZzLnVwbG9hZFBvc3Rlci51cGxvYWRGaWxlczsKICAgICAgY29uc29sZS5sb2coX2xpc3QpOwogICAgICB2YXIgX3BhdGhBcnIgPSBbXTsKCiAgICAgIF9saXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgcmVzID0gaXRlbS5yZXNwb25zZTsKCiAgICAgICAgaWYgKHJlcyAmJiAyMDAgPT09IE51bWJlci5wYXJzZUludChyZXMuY29kZSkpIHsKICAgICAgICAgIF9wYXRoQXJyLnB1c2gocmVzLmRhdGEucGF0aCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF9wYXRoQXJyLnB1c2goaXRlbS5wYXRoKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgdGhpcy5zaGFyZUluZm8ucG9zdGVyQXJyID0gX3BhdGhBcnI7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2hhcmVJbmZvKTsKICAgICAgdmFyIHBvc3REYXRhID0gewogICAgICAgIHNoYXJlSW5mbzogSlNPTi5zdHJpbmdpZnkodGhpcy5zaGFyZUluZm8pCiAgICAgIH07IC8vIOabtOaWsOaVsOaNrgoKICAgICAgdGhpcy5zYXZlQ29uZihwb3N0RGF0YSk7CiAgICB9LAogICAgc2F2ZUNvbmY6IGZ1bmN0aW9uIHNhdmVDb25mKGNvbmYpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRhcGkucG9zdCgiY29tcGFueS9jb25mIiwgY29uZikudGhlbihmdW5jdGlvbiAocmV0KSB7CiAgICAgICAgaWYgKHJldC5jb2RlID09PSAyMDApIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKHJldC5tc2cpO2Vsc2UgX3RoaXMyLiRtZXNzYWdlLmVycm9yKHJldC5tc2cpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uIGhhbmRsZVJlbW92ZShmaWxlLCBmaWxlTGlzdCkgewogICAgICBjb25zb2xlLmxvZyhmaWxlLCBmaWxlTGlzdCk7CiAgICB9LAogICAgaGFuZGxlUGljdHVyZUNhcmRQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVQaWN0dXJlQ2FyZFByZXZpZXcoZmlsZSkgewogICAgICB0aGlzLmRpYWxvZ0ltYWdlVXJsID0gZmlsZS51cmw7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["config-poster.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <!--  图文配置  -->\r\n    <el-card class=\"box-card\" v-loading=\"loading\"\r\n             element-loading-text=\"拼命加载中\"\r\n             element-loading-spinner=\"el-icon-loading\"\r\n             element-loading-background=\"rgba(0, 0, 0, 0.9)\">\r\n        <div slot=\"header\" class=\"clearfix\"><span>分享图文</span>\r\n        </div>\r\n        <el-form ref=\"form\" :model=\"shareInfo\" label-width=\"260px\">\r\n            <el-form-item label=\"分享默认标题\" prop=\"accessKey\">\r\n                <el-input type=\"text\" v-model=\"shareInfo.title\"\r\n                          placeholder=\"页面未设置分享时默认的分享标题\"/>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"封面展示（默认分享图片）：\">\r\n                <image-upload v-model=\"shareInfo\" field=\"cover\" :action=\"uploadUrl\"/>\r\n            </el-form-item>\r\n            <el-form-item label=\"logo：\">\r\n                <images-upload v-model=\"shareInfo\" field=\"logos\" :action=\"uploadUrl\"/>\r\n            </el-form-item>\r\n            <el-form-item label=\"海报图片集：\">\r\n                <images-upload :max=\"6\" v-model=\"shareInfo\" field=\"posterArr\" :action=\"uploadUrl\"/>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-alert title=\"修改后点击下方保存按钮生效\" type=\"info\" show-icon :closable=\"false\"/>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"save\">立即保存</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\n\r\nimport ImagesUpload from \"@/components/ImagesUpload\";\r\n\r\nexport default {\r\n    name: \"config-poster\",\r\n    components: {ImagesUpload},\r\n    data() {\r\n        return {\r\n            loading: false,\r\n            shareInfo: {\r\n                cover: \"\",\r\n                logos: [],\r\n                posterArr: [],\r\n                title: \"\",\r\n            },\r\n            uploadUrl: '',\r\n            dialogImageUrl: '',\r\n            dialogVisible: false,\r\n            uploadFileList: []\r\n        }\r\n    },\r\n    created() {\r\n        this.uploadUrl = this.$api.baseUrl + '/upload/' + this.$store.state.shop.id + '/share';\r\n        this.loading = true;\r\n        this.$api.get(\"company/conf\").then(res => {\r\n            if (res.code === 200) {\r\n                this.shareInfo = JSON.parse(res.data.shareInfo) || {\r\n                    cover: \"\",\r\n                    logo: \"\",\r\n                    posterArr: [],\r\n                    title: \"\",\r\n                };\r\n                if (this.shareInfo && this.shareInfo.posterArr) {\r\n                    let _pathArr = this.shareInfo.posterArr || [];\r\n                    let _showList = [];\r\n                    _pathArr.forEach(item => {\r\n                        _showList.push({\r\n                            url: this.$api.baseUrl + item,\r\n                            path: item\r\n                        })\r\n                    });\r\n                    this.uploadFileList = _showList;\r\n                }\r\n            }\r\n            this.loading = false;\r\n        }).catch(err => {\r\n            this.loading = false;\r\n        })\r\n\r\n    },\r\n    methods: {\r\n        save() {\r\n            let _list = this.$refs.uploadPoster.uploadFiles;\r\n            console.log(_list);\r\n            let _pathArr = [];\r\n            _list.forEach(item => {\r\n                let res = item.response;\r\n                if (res && 200 === Number.parseInt(res.code)) {\r\n                    _pathArr.push(res.data.path)\r\n                } else {\r\n                    _pathArr.push(item.path)\r\n                }\r\n            });\r\n            this.shareInfo.posterArr = _pathArr;\r\n            console.log(this.shareInfo);\r\n\r\n            let postData = {\r\n                shareInfo: JSON.stringify(this.shareInfo)\r\n            };\r\n            // 更新数据\r\n            this.saveConf(postData)\r\n        },\r\n        saveConf(conf) {\r\n            this.$api.post(\"company/conf\", conf).then(ret => {\r\n                if (ret.code === 200)\r\n                    this.$message.success(ret.msg);\r\n                else\r\n                    this.$message.error(ret.msg);\r\n            })\r\n        },\r\n        handleRemove(file, fileList) {\r\n            console.log(file, fileList);\r\n        },\r\n        handlePictureCardPreview(file) {\r\n            this.dialogImageUrl = file.url;\r\n            this.dialogVisible = true;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"src/views/conf"}]}