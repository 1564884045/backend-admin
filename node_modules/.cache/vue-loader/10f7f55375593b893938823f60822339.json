{"remainingRequest":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\RQDL\\base\\backend-admin\\src\\views\\user\\components\\scrollLoader.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\RQDL\\base\\backend-admin\\src\\views\\user\\components\\scrollLoader.vue","mtime":1620715077891},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJzY3JvbGwtbG9hZGVyIiwKCiAgICBwcm9wczogewogICAgICAgIC8v57uZc2xvdOS8oOS4gOS4quacgOWwj+WAvO+8jOS/neivgeS4gOW8gOWni+iDveWHuueOsOa7muWKqOadoQogICAgICAgICdtaW5IZWlnaHQnOiB7CiAgICAgICAgICAgIHR5cGU6IE51bWJlciwKICAgICAgICAgICAgZGVmYXVsdDogODAwCiAgICAgICAgfSwKCiAgICB9LAoKICAgIGNyZWF0ZWQoKXsKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIHJlYWxNaW5IZWlnaHQoKXsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubWluSGVpZ2h0ICsgMzAKICAgICAgICB9CiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgIHRvcExvYWRpbmc6IGZhbHNlLAogICAgICAgICAgIGJvdHRvbkxvYWRpbmc6IGZhbHNlLAoKICAgICAgICAgICBzdG9wVG9wTG9hZGluZzogZmFsc2UsIC8v5piv5ZCm5YGc5q2i5Lyg5pKt5rua5Yqo5Yiw6aG26YOo5LqL5Lu2CiAgICAgICAgICAgc3RvcEJvdHRvbkxvYWRpbmc6IGZhbHNlLCAgLy/mmK/lkKblgZzmraLkvKDmkq3mu5rliqjliLDlupXpg6jkuovku7YKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpewogICAgICAgIHRoaXMubGlzdGVuU2Nyb2xsKCk7CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICBsaXN0ZW5TY3JvbGwoKXsKICAgICAgICAgICAgdmFyIG1lID0gdGhpczsKICAgICAgICAgICAgdmFyIHRvcERvbmUgPSAoc3RvcFRvcExvYWRpbmcpID0+IHsKICAgICAgICAgICAgICAgIG1lLnRvcExvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmKHN0b3BUb3BMb2FkaW5nKSBtZS5zdG9wVG9wTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB2YXIgYm90dG9uRG9uZSA9IChzdG9wQm90dG9uTG9hZGluZykgPT4gewogICAgICAgICAgICAgICAgbWUuYm90dG9uTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYoc3RvcEJvdHRvbkxvYWRpbmcpIG1lLnN0b3BCb3R0b25Mb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdmFyIHNjcm9sbENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JvbGxMb2FkZXItY29udGFpbmVyJyk7CgogICAgICAgICAgICAgICAgc2Nyb2xsQ29udGFpbmVyLm9uc2Nyb2xsID0gZnVuY3Rpb24oKXsKCiAgICAgICAgICAgICAgICAgICAgaWYoc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcDw9MCAmJiAhbWUuc3RvcFRvcExvYWRpbmcpewogICAgICAgICAgICAgICAgICAgICAgICBpZihtZS50b3BMb2FkaW5nKSByZXR1cm47CgogICAgICAgICAgICAgICAgICAgICAgICBtZS50b3BMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgbWUuJGVtaXQoJ3Njcm9sbC10by10b3AnLCB0b3BEb25lKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYoKHNjcm9sbENvbnRhaW5lci5vZmZzZXRIZWlnaHQgKyBzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wKzEgPj0gc2Nyb2xsQ29udGFpbmVyLnNjcm9sbEhlaWdodCkgJiYgIW1lLnN0b3BCb3R0b25Mb2FkaW5nKXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYobWUuYm90dG9uTG9hZGluZykgcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICAgICAgbWUuYm90dG9uTG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgKz0gNDA7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lLiRlbWl0KCdzY3JvbGwtdG8tYm90dG9uJywgYm90dG9uRG9uZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCA1MCkKICAgICAgICB9LAoKICAgIH0KfQo="},{"version":3,"sources":["scrollLoader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"scrollLoader.vue","sourceRoot":"src/views/user/components","sourcesContent":["// scrollLoader.vue\r\n// 滚动加载组件\r\n\r\n<style scoped>\r\n   .container-main {margin: 0 auto; overflow: auto; overflow-x: hidden; padding: 0;}\r\n   .loading{ width: 100%; height: 40px; position: relative; overflow: hidden; text-align: center; margin: 5px 0 ; color: #999; font-size: 13px;}\r\n   .loading-icon{color: #707070;}\r\n   .loader {\r\n        font-size: 10px;\r\n        margin: 8px auto;\r\n        text-indent: -9999em;\r\n        width: 24px;\r\n        height: 24px;\r\n        border-radius: 50%;\r\n        background: #999;\r\n        background: -moz-linear-gradient(left, #999 10%, rgba(255, 255, 255, 0) 42%);\r\n        background: -webkit-linear-gradient(left, #999 10%, rgba(255, 255, 255, 0) 42%);\r\n        background: -o-linear-gradient(left, #999 10%, rgba(255, 255, 255, 0) 42%);\r\n        background: -ms-linear-gradient(left, #999 10%, rgba(255, 255, 255, 0) 42%);\r\n        background: linear-gradient(to right, #999 10%, rgba(255, 255, 255, 0) 42%);\r\n        position: relative;\r\n        -webkit-animation: load3 1s infinite linear;\r\n        animation: load3 1s infinite linear;\r\n    }\r\n    .loader:before {\r\n        width: 50%;\r\n        height: 50%;\r\n        background: #999;\r\n        border-radius: 100% 0 0 0;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        content: '';\r\n    }\r\n    .loader:after {\r\n        background: #f5f5f5;\r\n        width: 72%;\r\n        height: 75%;\r\n        border-radius: 68%;\r\n        content: '';\r\n        margin: auto;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        bottom: 0;\r\n        right: 0;\r\n    }\r\n    @-webkit-keyframes load3 {\r\n    0% {\r\n        -webkit-transform: rotate(0deg);\r\n        transform: rotate(0deg);\r\n    }\r\n    100% {\r\n        -webkit-transform: rotate(360deg);\r\n        transform: rotate(360deg);\r\n    }\r\n    }\r\n    @keyframes load3 {\r\n    0% {\r\n        -webkit-transform: rotate(0deg);\r\n        transform: rotate(0deg);\r\n    }\r\n    100% {\r\n        -webkit-transform: rotate(360deg);\r\n        transform: rotate(360deg);\r\n    }\r\n    }\r\n\r\n</style>\r\n\r\n<template>\r\n    <div id=\"scrollLoader-container\" class=\"container-main\">\r\n        <div class=\"loading\" v-if=\"topLoading\">\r\n            <div class=\"loader\">加载中...</div>\r\n        </div>\r\n\r\n        <div :style=\"'min-height:' + realMinHeight + 'px; overflow-x:hidden'\">\r\n            <slot></slot>\r\n        </div>\r\n\r\n        <div class=\"loading\" v-if=\"bottonLoading\">\r\n            <div class=\"loader\">加载中...</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"scroll-loader\",\r\n\r\n        props: {\r\n            //给slot传一个最小值，保证一开始能出现滚动条\r\n            'minHeight': {\r\n                type: Number,\r\n                default: 800\r\n            },\r\n\r\n        },\r\n\r\n        created(){\r\n        },\r\n        computed: {\r\n            realMinHeight(){\r\n                return this.minHeight + 30\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n               topLoading: false,\r\n               bottonLoading: false,\r\n\r\n               stopTopLoading: false, //是否停止传播滚动到顶部事件\r\n               stopBottonLoading: false,  //是否停止传播滚动到底部事件\r\n            }\r\n        },\r\n        mounted(){\r\n            this.listenScroll();\r\n        },\r\n\r\n        methods: {\r\n            listenScroll(){\r\n                var me = this;\r\n                var topDone = (stopTopLoading) => {\r\n                    me.topLoading = false;\r\n                    if(stopTopLoading) me.stopTopLoading = true;\r\n                };\r\n\r\n                var bottonDone = (stopBottonLoading) => {\r\n                    me.bottonLoading = false;\r\n                    if(stopBottonLoading) me.stopBottonLoading = true;\r\n                };\r\n                setTimeout(function(){\r\n                    var scrollContainer = document.getElementById('scrollLoader-container');\r\n\r\n                    scrollContainer.onscroll = function(){\r\n\r\n                        if(scrollContainer.scrollTop<=0 && !me.stopTopLoading){\r\n                            if(me.topLoading) return;\r\n\r\n                            me.topLoading = true;\r\n                            me.$emit('scroll-to-top', topDone);\r\n                        }\r\n                        if((scrollContainer.offsetHeight + scrollContainer.scrollTop+1 >= scrollContainer.scrollHeight) && !me.stopBottonLoading){\r\n                            if(me.bottonLoading) return;\r\n\r\n                            me.bottonLoading = true;\r\n                            scrollContainer.scrollTop += 40;\r\n                            me.$emit('scroll-to-botton', bottonDone);\r\n                        }\r\n                    }\r\n                }, 50)\r\n            },\r\n\r\n        }\r\n    }\r\n</script>\r\n"]}]}