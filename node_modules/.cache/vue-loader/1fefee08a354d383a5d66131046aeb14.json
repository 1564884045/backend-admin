{"remainingRequest":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\RQDL\\base\\backend-admin\\src\\components\\RemoteSelect\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\RQDL\\base\\backend-admin\\src\\components\\RemoteSelect\\index.vue","mtime":1620715077795},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJyZW1vdGVTZWxlY3QiLA0KICBwcm9wczogew0KICAgIHZhbHVlOiBPYmplY3QsDQogICAgLyoqDQogICAgICog6YCJ5Lit5YC85pe257uR5a6a5YiwdmFsdWXkuK3nmoTlsZ7mgKflkI0NCiAgICAgKi8NCiAgICBmaWVsZDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogImlkIiwNCiAgICB9LA0KICAgIHNlbGZUZW1wbGF0ZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlLA0KICAgIH0sDQogICAgLyoqDQogICAgICog5YC85Y+Y5YyW5pe2dmFsdWXkuK3nmoTlsZ7mgKflgLzlkI3mlbDnu4QNCiAgICAgKi8NCiAgICBiaW5kRmllbGRzOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgcmV0dXJuIFtdDQogICAgICB9DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDlsZXnpLrnmoTojrflj5bliLDnmoTliJfooajph4znmoTlgLwNCiAgICAgKi8NCiAgICBzaG93TGFiZWw6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICJuYW1lIiwNCiAgICB9LA0KICAgIHBsYWNlaG9sZGVyOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAi6K+36YCJ5oupIiwNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOi/nOeoi+WcsOWdgA0KICAgICAqLw0KICAgIGFwaTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogIiIsDQogICAgICByZXF1aXJlOiB0cnVlDQogICAgfSwNCiAgICAvKioNCiAgICAgKiDpu5jorqTlgLwNCiAgICAgKi8NCiAgICBkZWZhdWx0VmFsdWU6IHsNCiAgICAgIHR5cGU6IG51bGwsDQogICAgICBkZWZhdWx0OiAiIiwNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOWIneWni+WMlue7hOS7tuaXtuaYr+WQpuWwseebtOaOpeiHquWKqOWKoOi9vQ0KICAgICAqLw0KICAgIGF1dG9Mb2FkOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UsDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB2OiAnJywNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgbG9hZGluZzogZmFsc2UNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgZGVmYXVsdFZhbHVlOiBmdW5jdGlvbiAodmFsKSB7DQogICAgICBjb25zb2xlLmxvZyh2YWwpOw0KICAgICAgaWYgKHZhbCkgew0KICAgICAgICB0aGlzLnYgPSB2YWwNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMudiA9ICIiDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGlmICh0aGlzLmF1dG9Mb2FkKSB0aGlzLnJlbW90ZU1ldGhvZCgiIik7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBhdENsaWNrKCkgew0KICAgICAgaWYgKHRoaXMubGlzdC5sZW5ndGggPT09IDApIHRoaXMucmVtb3RlTWV0aG9kKCIiKTsNCiAgICB9LA0KICAgIGFzeW5jIHJlbW90ZU1ldGhvZChlKSB7DQogICAgICAvLyBjb25zb2xlLmxvZyhlKTsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7DQogICAgICB0aGlzLiRhcGkuZ2V0KHRoaXMuYXBpLCB7DQogICAgICAgIHNlYXJjaEtleTogZSwNCiAgICAgICAgcGFnZTogMSwNCiAgICAgICAgcGFnZVNpemU6IDMwDQogICAgICB9KS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7DQogICAgICAgIH0sIDQwMCk7DQoNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHRoaXMubGlzdCA9IHJlcy5kYXRhLmxpc3Q7DQogICAgICB9KQ0KICAgIH0sDQogICAgY2hhbmdlKGUpIHsNCiAgICAgIHRoaXMuJGVtaXQoImNoYW5nZSIsIGUpOw0KICAgICAgdGhpcy52YWx1ZVt0aGlzLmZpZWxkXSA9IHRoaXMudjsNCiAgICAgIHRoaXMuY2hhbmdlT2JqKCk7DQogICAgfSwNCiAgICBjaGFuZ2VPYmooKSB7DQogICAgICBsZXQgb2JqID0gbnVsbDsNCiAgICAgIHRoaXMubGlzdC5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpZiAodGhpcy52ID09PSBpdGVtLmlkKXsNCiAgICAgICAgICAgIG9iaiA9IGl0ZW07DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhvYmopOw0KICAgICAgICAgIHRoaXMuYmluZEZpZWxkcy5tYXAoaSA9PiB7DQogICAgICAgICAgICBpZiAoaXRlbVtpXSl7IHRoaXMudmFsdWVbaV0gPSBpdGVtW2ldO30NCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudmFsdWUpDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICB0aGlzLiRlbWl0KCJjaGFuZ2VPYmoiLCBvYmopOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/RemoteSelect","sourcesContent":["<template>\r\n  <el-select @change=\"change\"\r\n             @focus=\"atClick\"\r\n             filterable\r\n             remote\r\n             auto-complete=\"new-password\"\r\n             reserve-keyword\r\n             :remote-method=\"remoteMethod\"\r\n             :loading=\"loading\" v-model=\"v\" :placeholder=\"placeholder\">\r\n    <el-option\r\n        v-for=\"(item,index) in list\"\r\n        :key=\"index\"\r\n        :label=\"item[showLabel]\"\r\n        :value=\"item.id\">\r\n      <span v-if=\"!selfTemplate\">{{ item[showLabel] }}</span>\r\n      <span v-else> <slot :item=\"item\"/></span>\r\n    </el-option>\r\n  </el-select>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"remoteSelect\",\r\n  props: {\r\n    value: Object,\r\n    /**\r\n     * 选中值时绑定到value中的属性名\r\n     */\r\n    field: {\r\n      type: String,\r\n      default: \"id\",\r\n    },\r\n    selfTemplate: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    /**\r\n     * 值变化时value中的属性值名数组\r\n     */\r\n    bindFields: {\r\n      type: Array,\r\n      default: function () {\r\n        return []\r\n      }\r\n    },\r\n    /**\r\n     * 展示的获取到的列表里的值\r\n     */\r\n    showLabel: {\r\n      type: String,\r\n      default: \"name\",\r\n    },\r\n    placeholder: {\r\n      type: String,\r\n      default: \"请选择\",\r\n    },\r\n    /**\r\n     * 远程地址\r\n     */\r\n    api: {\r\n      type: String,\r\n      default: \"\",\r\n      require: true\r\n    },\r\n    /**\r\n     * 默认值\r\n     */\r\n    defaultValue: {\r\n      type: null,\r\n      default: \"\",\r\n    },\r\n    /**\r\n     * 初始化组件时是否就直接自动加载\r\n     */\r\n    autoLoad: {\r\n      type: Boolean,\r\n      default: false,\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      v: '',\r\n      list: [],\r\n      loading: false\r\n    }\r\n  },\r\n  watch: {\r\n    defaultValue: function (val) {\r\n      console.log(val);\r\n      if (val) {\r\n        this.v = val\r\n      } else {\r\n        this.v = \"\"\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.autoLoad) this.remoteMethod(\"\");\r\n  },\r\n  methods: {\r\n    atClick() {\r\n      if (this.list.length === 0) this.remoteMethod(\"\");\r\n    },\r\n    async remoteMethod(e) {\r\n      // console.log(e);\r\n      this.loading = true;\r\n      this.$api.get(this.api, {\r\n        searchKey: e,\r\n        page: 1,\r\n        pageSize: 30\r\n      }).then((res) => {\r\n        setTimeout(() => {\r\n          this.loading = false;\r\n        }, 400);\r\n\r\n        if (res.code === 200) this.list = res.data.list;\r\n      })\r\n    },\r\n    change(e) {\r\n      this.$emit(\"change\", e);\r\n      this.value[this.field] = this.v;\r\n      this.changeObj();\r\n    },\r\n    changeObj() {\r\n      let obj = null;\r\n      this.list.forEach(item => {\r\n        if (this.v === item.id){\r\n            obj = item;\r\n            // console.log(obj);\r\n          this.bindFields.map(i => {\r\n            if (item[i]){ this.value[i] = item[i];}\r\n            // console.log(this.value)\r\n          })\r\n        }\r\n      });\r\n      this.$emit(\"changeObj\", obj);\r\n    }\r\n  }\r\n}\r\n</script>Z\r\n"]}]}