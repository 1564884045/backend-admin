{"remainingRequest":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\RQDL\\base\\backend-admin\\src\\views\\selects\\money.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\RQDL\\base\\backend-admin\\src\\views\\selects\\money.vue","mtime":1621303824028},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdtb25leUxpc3QnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvLyDliIbpobXmlbDmja4KICAgICAgICAgICAgcGFnZTogMSwvL+m7mOiupOaYvuekuuesrOWHoOmhtQogICAgICAgICAgICBwYWdlU2l6ZTogMjAsLy/pu5jorqTmmL7npLrlpJrlsJHmnaHmr4/pobUKICAgICAgICAgICAgdG90YWw6IDAsIC8vIOaAu+iusOW9leaVsAogICAgICAgICAgICAvLyDpobXpnaLnu5PmnoTmlbDmja4KICAgICAgICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgICAgICAgLy8g6KGo5qC85a2X5q61CiAgICAgICAgICAgIGNvbHNEYXRhOiBbCiAgICAgICAgICAgICAgICB7cHJvcDogJ25hbWUnLCBsYWJlbDogJ+iWqui1hCcsIHNvcnRhYmxlOiBmYWxzZSwgZml4ZWQ6IGZhbHNlfSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgLy8g5pCc57Si6KGo5Y2V5a2X5q61CiAgICAgICAgICAgIHNlYXJjaEZpZWxkczogWwogICAgICAgICAgICAgICAge2xhYmVsOiAn5pCc57SiJywgcHJvcDogJ3NlYXJjaEtleScsIHR5cGU6ICd0ZXh0J30sCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIC8vIOafpeivouaVsOaNrgogICAgICAgICAgICBxdWVyeURhdGE6IHt9LAogICAgICAgICAgICAvLyDoh6rlrprkuYnmianlsZXlrZfmrrUKICAgICAgICAgICAgc3RhdHVzQXJyOiBbCiAgICAgICAgICAgICAgICB7dmFsdWU6IDEsIGxhYmVsOiAn5q2j5bi45L2/55SoJ30sCiAgICAgICAgICAgICAgICB7dmFsdWU6IDAsIGxhYmVsOiAn56aB5q2i55m75b2VJ30sCiAgICAgICAgICAgIF0sCgogICAgICAgICAgICAvLyDpobXpnaLmmL7npLrmlbDmja4KICAgICAgICAgICAgc2hvd0FkZEJveDogZmFsc2UsCiAgICAgICAgICAgIHVwbG9hZFVybDogdGhpcy4kYXBpLnVwbG9hZFVybCwKCiAgICAgICAgICAgIHRtcFJvdzogeyAvLyDmn6XnnIvjgIHmt7vliqDnmoTkuLTml7blj5jph48KICAgICAgICAgICAgICAgIGlkOiAnJywKICAgICAgICAgICAgICAgIGZvbGxvd1NhbGVOYW1lOiAnJywKICAgICAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICAgICAgc2hvd1N0YXR1czogMSwKICAgICAgICAgICAgICAgIGxldmVsOiAxCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVkaXRUaXRsZTogJ+a3u+WKoCcsCiAgICAgICAgICAgIHN1Ym1pdFRleHQ6ICfnoa7orqTmt7vliqAnLAogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLnNob3ApOwoKICAgICAgICBpZiAodGhpcy4kaGFzQ29uZignY29uZmlnJywgJ3JlYWxOYW1lJykpIHsKICAgICAgICAgICAgbGV0IF9yZWFsTmFtZSA9IFsKICAgICAgICAgICAgICAgIHt2YWx1ZTogMiwgbGFiZWw6ICfmnKrlrp7lkI0nLCBkaXNhYmxlOiB0cnVlfSwKICAgICAgICAgICAgICAgIHt2YWx1ZTogMywgbGFiZWw6ICflt7Lmj5DkuqTlrp7lkI3mnZDmlpknLCBkaXNhYmxlOiB0cnVlfSwKICAgICAgICAgICAgXTsKICAgICAgICAgICAgdGhpcy5zdGF0dXNBcnIgPSB0aGlzLnN0YXR1c0Fyci5jb25jYXQoX3JlYWxOYW1lKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuJGhhc1ZpcCgncmViYXRlJykpCiAgICAgICAgICAgIHRoaXMuY29sc0RhdGEucHVzaCh7CiAgICAgICAgICAgICAgICBwcm9wOiAndG90YWxSZWJhdGVNb25leScsIGxhYmVsOiAn6L+U5Yip5L2Z6aKdKOWFgyknLCBhbGlnbjogJ2NlbnRlcicsIHNvcnRhYmxlOiBmYWxzZSwgZml4ZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgcGlwZTogZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwgPyB2YWwgOiAnMC4wMCc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIHRoaXMuZ2V0RGF0YSgpCiAgICAgICAgLy8g6I635Y+W5L6b5bqU5ZWGCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC8qKgogICAgICAgICAqIOacrOmhteiOt+WPluaVsOaNrgogICAgICAgICAqLwogICAgICAgIGFzeW5jIGdldERhdGEoKSB7CiAgICAgICAgICAgIHRoaXMucXVlcnlEYXRhLnBhZ2UgPSB0aGlzLnBhZ2U7CiAgICAgICAgICAgIHRoaXMucXVlcnlEYXRhLnBhZ2VTaXplID0gdGhpcy5wYWdlU2l6ZTsKCiAgICAgICAgICAgIGxldCBfZGF0YSA9IGF3YWl0IHRoaXMuJGFwaS5nZXQoJ3RlYWNoZXIvbW9uZXkvbGlzdCcsIHRoaXMucXVlcnlEYXRhKTsKICAgICAgICAgICAgY29uc29sZS5sb2coX2RhdGEpOwogICAgICAgICAgICBpZiAoX2RhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IF9kYXRhLmRhdGEubGlzdDsKICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSBfZGF0YS5kYXRhLnRvdGFsCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIHN0YXR1c0NoYW5nZShlLCByb3cpIHsKICAgICAgICAgICAgbGV0IHBvc3REYXRhID0gewogICAgICAgICAgICAgICAgaWQ6IHJvdy5pZCwKICAgICAgICAgICAgICAgIHN0YXR1czogZQogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocm93KTsKICAgICAgICAgICAgbGV0IF9yZXMgPSBhd2FpdCB0aGlzLiRhcGkucG9zdCgidGVhY2hlci9tb25leSIsIHBvc3REYXRhKTsKICAgICAgICAgICAgaWYgKF9yZXMuY29kZSAhPT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKF9yZXMubXNnKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgLy8g55uR5ZCs6aG16Z2i5pS55Y+YCiAgICAgICAgcGFnZUNoYW5nZShlKSB7CiAgICAgICAgICAgIHRoaXMucGFnZSA9IGUuY3VycmVudFBhZ2U7CiAgICAgICAgICAgIHRoaXMucGFnZVNpemUgPSBlLnBhZ2VTaXplCiAgICAgICAgfSwKICAgICAgICBzZWFyY2goKSB7CiAgICAgICAgICAgIHRoaXMucGFnZSA9IDE7CiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpCiAgICAgICAgfSwKICAgICAgICAvKioKICAgICAgICAgKiDmlrDlop7lkozkv67mlLkKICAgICAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0KICAgICAgICAgKiBAcGFyYW0gcm93CiAgICAgICAgICovCiAgICAgICAgYXN5bmMgc2F2ZVVwZGF0ZShyb3cpIHsKICAgICAgICAgICAgbGV0IF90aXA7CiAgICAgICAgICAgIGlmIChyb3cuaWQpIHsKICAgICAgICAgICAgICAgIF90aXAgPSAn5L+u5pS5JzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aXAgPSAn5paw5aKeJzsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNhdmVBY3Rpb24ocm93LCBfdGlwKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIHNhdmVBY3Rpb24ocG9zdERhdGEsIF90aXAgPSAi5pON5L2cIikgewogICAgICAgICAgICBsZXQgX3Bvc3QgPSBhd2FpdCB0aGlzLiRhcGkucG9zdCgndGVhY2hlci9tb25leScsIHBvc3REYXRhKTsKICAgICAgICAgICAgaWYgKF9wb3N0LmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgdGhpcy5zaG93QWRkQm94ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoX3RpcCArICfmiJDlip8nKTsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKF9wb3N0Lm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHNob3dFQUJveChyb3cgPSBudWxsKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJvdyk7CiAgICAgICAgICAgIGlmIChyb3cpIHsKICAgICAgICAgICAgICAgIHRoaXMudG1wUm93ID0gcm93OwogICAgICAgICAgICAgICAgdGhpcy5lZGl0VGl0bGUgPSAn57yW6L6R5L+h5oGvJzsKICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0VGV4dCA9ICfnoa7orqTkv67mlLknOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy50bXBSb3cgPSB7bmFtZTogJyd9OwogICAgICAgICAgICAgICAgdGhpcy5lZGl0VGl0bGUgPSAn5paw5aKe6Jaq6LWEJzsKICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0VGV4dCA9ICfmj5DkuqQnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2hvd0FkZEJveCA9IHRydWU7CiAgICAgICAgfSwKICAgIH0KfQo="},{"version":3,"sources":["money.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"money.vue","sourceRoot":"src/views/selects","sourcesContent":["<template>\r\n    <div style=\"height: 100%\">\r\n        <div class=\"flex ptb-10 align-center\">\r\n            <div class=\"w-50 flex justify-start\">\r\n                <div class=\"w-50\">\r\n                    <el-button icon=\"el-icon-plus\" type=\"primary\" @click=\"showEABox(null,false)\">\r\n                        添加\r\n                    </el-button>\r\n                </div>\r\n            </div>\r\n            <div class=\"w-50 flex justify-end\">\r\n                <el-form class=\"align-center flex\" :inline=\"true\" :model=\"queryData\" @submit.native.prevent>\r\n                    <el-input class=\"mlr-10\"\r\n                              v-model.trim=\"queryData.searchKey\"\r\n                              placeholder=\"请输入查询条件\"\r\n                              clearable\r\n                    />\r\n                    <el-button icon=\"el-icon-search\" type=\"primary\" @click=\"search\">\r\n                        查询\r\n                    </el-button>\r\n                </el-form>\r\n            </div>\r\n        </div>\r\n\r\n        <table-builder :table-data=\"tableData\" :cols=\"colsData\" :total=\"total\">\r\n            <el-table-column label=\"操作\">\r\n                <template slot-scope=\"{row}\">\r\n                    <el-button type=\"primary\" plain size=\"mini\" @click=\"showEABox(row)\">修改</el-button>\r\n                    <el-button type=\"danger\" plain size=\"mini\" @click=\"del(row)\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </table-builder>\r\n\r\n        <!--  弹窗 //新增 编辑 -->\r\n        <el-dialog :visible.sync=\"showAddBox\" :title=\"editTitle\" :close-on-click-modal=\"false\">\r\n            <el-form v-if=\"showAddBox\" ref=\"form\" :model=\"tmpRow\" label-width=\"150px\">\r\n                <el-form-item label=\"名称\" prop=\"name\">\r\n                    <el-input v-model=\"tmpRow.name\"/>\r\n                </el-form-item>\r\n                <el-form-item label=\"简介（可选）\" prop=\"intro\">\r\n                    <el-input type=\"textarea\" v-model=\"tmpRow.intro\"/>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" @click=\"saveUpdate(tmpRow)\">{{ submitText }}</el-button>\r\n                    <el-button @click=\"showAddBox = false\">取消</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </el-dialog>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'moneyList',\r\n        data() {\r\n            return {\r\n                // 分页数据\r\n                page: 1,//默认显示第几页\r\n                pageSize: 20,//默认显示多少条每页\r\n                total: 0, // 总记录数\r\n                // 页面结构数据\r\n                tableData: [],\r\n                // 表格字段\r\n                colsData: [\r\n                    {prop: 'name', label: '薪资', sortable: false, fixed: false},\r\n                ],\r\n                // 搜索表单字段\r\n                searchFields: [\r\n                    {label: '搜索', prop: 'searchKey', type: 'text'},\r\n                ],\r\n                // 查询数据\r\n                queryData: {},\r\n                // 自定义扩展字段\r\n                statusArr: [\r\n                    {value: 1, label: '正常使用'},\r\n                    {value: 0, label: '禁止登录'},\r\n                ],\r\n\r\n                // 页面显示数据\r\n                showAddBox: false,\r\n                uploadUrl: this.$api.uploadUrl,\r\n\r\n                tmpRow: { // 查看、添加的临时变量\r\n                    id: '',\r\n                    followSaleName: '',\r\n                    name: '',\r\n                    showStatus: 1,\r\n                    level: 1\r\n                },\r\n                editTitle: '添加',\r\n                submitText: '确认添加',\r\n            }\r\n        },\r\n        created() {\r\n            console.log(this.$store.state.shop);\r\n\r\n            if (this.$hasConf('config', 'realName')) {\r\n                let _realName = [\r\n                    {value: 2, label: '未实名', disable: true},\r\n                    {value: 3, label: '已提交实名材料', disable: true},\r\n                ];\r\n                this.statusArr = this.statusArr.concat(_realName);\r\n            }\r\n            if (this.$hasVip('rebate'))\r\n                this.colsData.push({\r\n                    prop: 'totalRebateMoney', label: '返利余额(元)', align: 'center', sortable: false, fixed: false,\r\n                    pipe: function (val) {\r\n                        return val ? val : '0.00';\r\n                    }\r\n                });\r\n            this.getData()\r\n            // 获取供应商\r\n        },\r\n        methods: {\r\n            /**\r\n             * 本页获取数据\r\n             */\r\n            async getData() {\r\n                this.queryData.page = this.page;\r\n                this.queryData.pageSize = this.pageSize;\r\n\r\n                let _data = await this.$api.get('teacher/money/list', this.queryData);\r\n                console.log(_data);\r\n                if (_data.code === 200) {\r\n                    this.tableData = _data.data.list;\r\n                    this.total = _data.data.total\r\n                }\r\n            },\r\n            async statusChange(e, row) {\r\n                let postData = {\r\n                    id: row.id,\r\n                    status: e\r\n                };\r\n                console.log(e);\r\n                console.log(row);\r\n                let _res = await this.$api.post(\"teacher/money\", postData);\r\n                if (_res.code !== 200) {\r\n                    this.$message.error(_res.msg);\r\n                    this.getData();\r\n                }\r\n            },\r\n\r\n            // 监听页面改变\r\n            pageChange(e) {\r\n                this.page = e.currentPage;\r\n                this.pageSize = e.pageSize\r\n            },\r\n            search() {\r\n                this.page = 1;\r\n                this.getData()\r\n            },\r\n            /**\r\n             * 新增和修改\r\n             * @returns {Promise<void>}\r\n             * @param row\r\n             */\r\n            async saveUpdate(row) {\r\n                let _tip;\r\n                if (row.id) {\r\n                    _tip = '修改';\r\n                } else {\r\n                    _tip = '新增';\r\n                }\r\n                this.saveAction(row, _tip);\r\n            },\r\n            async saveAction(postData, _tip = \"操作\") {\r\n                let _post = await this.$api.post('teacher/money', postData);\r\n                if (_post.code === 200) {\r\n                    this.showAddBox = false;\r\n                    this.$message.success(_tip + '成功');\r\n                    this.getData()\r\n                } else {\r\n                    this.$message.error(_post.msg);\r\n                }\r\n            },\r\n            showEABox(row = null) {\r\n                console.log(row);\r\n                if (row) {\r\n                    this.tmpRow = row;\r\n                    this.editTitle = '编辑信息';\r\n                    this.submitText = '确认修改';\r\n                } else {\r\n                    this.tmpRow = {name: ''};\r\n                    this.editTitle = '新增薪资';\r\n                    this.submitText = '提交';\r\n                }\r\n                this.showAddBox = true;\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n<style scoped>\r\n    .el-upload:hover {\r\n        border-color: #409EFF;\r\n    }\r\n\r\n    /deep/ .chat-box .el-dialog__body {\r\n        padding: 0;\r\n    }\r\n\r\n    /deep/ .chat-box .el-dialog__header {\r\n        background-color: #000000;\r\n    }\r\n\r\n    /deep/ .chat-box .el-dialog__header .el-dialog__title {\r\n        color: #FFF;\r\n    }\r\n\r\n    .avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 178px;\r\n        height: 178px;\r\n        line-height: 178px;\r\n        text-align: center;\r\n    }\r\n\r\n    .avatar {\r\n        width: 178px;\r\n        height: 178px;\r\n        display: block;\r\n    }\r\n</style>\r\n"]}]}