{"remainingRequest":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\RQDL\\base\\backend-admin\\src\\layout\\components\\Search\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\RQDL\\base\\backend-admin\\src\\layout\\components\\Search\\index.vue","mtime":1620715077806},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkZWVwQ2xvbmUgfSBmcm9tICdAL3V0aWwnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnU2VhcmNoJywNCiAgICBwcm9wczoge30sDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGlzU2hvdzogZmFsc2UsDQogICAgICAgICAgICBzZWFyY2g6ICcnLA0KICAgICAgICAgICAgc291cmNlTGlzdDogW10NCiAgICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgcmVzdWx0TGlzdCgpIHsNCiAgICAgICAgICAgIGxldCByZXN1bHQgPSBbXQ0KICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5zb3VyY2VMaXN0LmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICBsZXQgZmxhZyA9IGZhbHNlDQogICAgICAgICAgICAgICAgaWYgKGl0ZW0udGl0bGUuaW5kZXhPZih0aGlzLnNlYXJjaCkgPj0gMCkgew0KICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoaXRlbS5wYXRoLmluZGV4T2YodGhpcy5zZWFyY2gpID49IDApIHsNCiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWUNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGl0ZW0uYnJlYWRjcnVtYi5zb21lKGIgPT4gYi5pbmRleE9mKHRoaXMuc2VhcmNoKSA+PSAwKSkgew0KICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gZmxhZw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQNCiAgICAgICAgfQ0KICAgIH0sDQogICAgd2F0Y2g6IHsNCiAgICAgICAgaXNTaG93KHZhbCkgew0KICAgICAgICAgICAgaWYgKHZhbCkgew0KICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKQ0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuc2VhcmNoLnNjcm9sbFRvcCA9IDANCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5pbnB1dC4kZWwuY2hpbGRyZW5bMF0uZm9jdXMoKQ0KICAgICAgICAgICAgICAgIH0sIDEwMCkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpDQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoID0gJycNCiAgICAgICAgICAgICAgICB9LCA1MDApDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KICAgIGNyZWF0ZWQoKSB7fSwNCiAgICBtb3VudGVkKCkgew0KICAgICAgICB0aGlzLiRldmVudEJ1cy4kb24oJ2dsb2JhbC1zZWFyY2gtdG9nZ2xlJywgKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5pc1Nob3cgPSAhdGhpcy5pc1Nob3cNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubWVudS5yb3V0ZXMubWFwKGl0ZW0gPT4gew0KICAgICAgICAgICAgdGhpcy5nZXRTb3VyY2VMaXN0KGl0ZW0uY2hpbGRyZW4pDQogICAgICAgIH0pDQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGlzRXh0ZXJuYWwocGF0aCkgew0KICAgICAgICAgICAgcmV0dXJuIC9eKGh0dHBzPzp8bWFpbHRvOnx0ZWw6KS8udGVzdChwYXRoKQ0KICAgICAgICB9LA0KICAgICAgICBoYXNDaGlsZHJlbihpdGVtKSB7DQogICAgICAgICAgICBsZXQgZmxhZyA9IHRydWUNCiAgICAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7DQogICAgICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4uZXZlcnkoaSA9PiBpLm1ldGEuc2lkZWJhciA9PT0gZmFsc2UpKSB7DQogICAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gZmxhZw0KICAgICAgICB9LA0KICAgICAgICBnZXRTb3VyY2VMaXN0KGFycikgew0KICAgICAgICAgICAgYXJyLm1hcChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICBpZiAoaXRlbS5tZXRhLnNpZGViYXIgIT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc0NoaWxkcmVuKGl0ZW0pKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmFzZUJyZWFkY3J1bWIgPSBpdGVtLm1ldGEuYmFzZUJyZWFkY3J1bWIgPyBkZWVwQ2xvbmUoaXRlbS5tZXRhLmJhc2VCcmVhZGNydW1iKSA6IFtdDQogICAgICAgICAgICAgICAgICAgICAgICBiYXNlQnJlYWRjcnVtYi5wdXNoKGl0ZW0ubWV0YS50aXRsZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGlsZCA9IGRlZXBDbG9uZShpdGVtLmNoaWxkcmVuKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQubWFwKGMgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMubWV0YS5iYXNlSWNvbiA9IGl0ZW0ubWV0YS5pY29uIHx8IGl0ZW0ubWV0YS5iYXNlSWNvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMubWV0YS5iYXNlQnJlYWRjcnVtYiA9IGJhc2VCcmVhZGNydW1iDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5tZXRhLmJhc2VQYXRoID0gaXRlbS5tZXRhLmJhc2VQYXRoID8gW2l0ZW0ubWV0YS5iYXNlUGF0aCwgaXRlbS5wYXRoXS5qb2luKCcvJykgOiBpdGVtLnBhdGgNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFNvdXJjZUxpc3QoY2hpbGQpDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYnJlYWRjcnVtYiA9IFtdDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5tZXRhLmJhc2VCcmVhZGNydW1iKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWRjcnVtYiA9IGRlZXBDbG9uZShpdGVtLm1ldGEuYmFzZUJyZWFkY3J1bWIpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iLnB1c2goaXRlbS5tZXRhLnRpdGxlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhdGggPSAnJw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFeHRlcm5hbChpdGVtLnBhdGgpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IGl0ZW0ucGF0aA0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gaXRlbS5tZXRhLmJhc2VQYXRoID8gW2l0ZW0ubWV0YS5iYXNlUGF0aCwgaXRlbS5wYXRoXS5qb2luKCcvJykgOiBpdGVtLnBhdGgNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlTGlzdC5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpdGVtLm1ldGEuaWNvbiB8fCBpdGVtLm1ldGEuYmFzZUljb24sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW0ubWV0YS50aXRsZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iOiBicmVhZGNydW1iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGgsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNFeHRlcm5hbDogdGhpcy5pc0V4dGVybmFsKGl0ZW0ucGF0aCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/layout/components/Search","sourcesContent":["<template>\r\n    <div id=\"search\" :class=\"{'searching': isShow}\" @click=\"isShow && $eventBus.$emit('global-search-toggle')\">\r\n        <div class=\"container\">\r\n            <div class=\"search-box\" @click.stop>\r\n                <el-input ref=\"input\" v-model=\"search\" prefix-icon=\"el-icon-search\" placeholder=\"搜索页面\" clearable @keydown.esc.native=\"$eventBus.$emit('global-search-toggle')\" />\r\n                <div class=\"tips\">您可以使用快捷键<span>alt</span>+<span>F</span>唤醒搜索面板，按<span>esc</span>退出</div>\r\n            </div>\r\n            <div ref=\"search\" class=\"result\">\r\n                <router-link v-for=\"item in resultList\" :key=\"item.path\" v-slot=\"{ href, navigate }\" custom :to=\"isShow ? item.path : ''\">\r\n                    <a :href=\"isExternal(item.path) ? item.path : href\" class=\"item\" :target=\"isExternal(item.path) ? '_blank' : '_self'\" @click=\"navigate\">\r\n                        <div class=\"icon\">\r\n                            <svg-icon v-if=\"item.icon\" :name=\"item.icon\" />\r\n                        </div>\r\n                        <div class=\"info\">\r\n                            <div class=\"title\">\r\n                                {{ item.title }}\r\n                                <svg-icon v-if=\"item.isExternal\" name=\"external-link\" />\r\n                            </div>\r\n                            <div class=\"breadcrumb\">\r\n                                <span v-for=\"(bc, index) in item.breadcrumb\" :key=\"index\">\r\n                                    {{ bc }}\r\n                                    <i class=\"el-icon-arrow-right\" />\r\n                                </span>\r\n                            </div>\r\n                            <div class=\"path\">{{ item.path }}</div>\r\n                        </div>\r\n                    </a>\r\n                </router-link>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { deepClone } from '@/util'\r\n\r\nexport default {\r\n    name: 'Search',\r\n    props: {},\r\n    data() {\r\n        return {\r\n            isShow: false,\r\n            search: '',\r\n            sourceList: []\r\n        }\r\n    },\r\n    computed: {\r\n        resultList() {\r\n            let result = []\r\n            result = this.sourceList.filter(item => {\r\n                let flag = false\r\n                if (item.title.indexOf(this.search) >= 0) {\r\n                    flag = true\r\n                }\r\n                if (item.path.indexOf(this.search) >= 0) {\r\n                    flag = true\r\n                }\r\n                if (item.breadcrumb.some(b => b.indexOf(this.search) >= 0)) {\r\n                    flag = true\r\n                }\r\n                return flag\r\n            })\r\n            return result\r\n        }\r\n    },\r\n    watch: {\r\n        isShow(val) {\r\n            if (val) {\r\n                document.querySelector('body').classList.add('hidden')\r\n                this.$refs.search.scrollTop = 0\r\n                setTimeout(() => {\r\n                    this.$refs.input.$el.children[0].focus()\r\n                }, 100)\r\n            } else {\r\n                document.querySelector('body').classList.remove('hidden')\r\n                setTimeout(() => {\r\n                    this.search = ''\r\n                }, 500)\r\n            }\r\n        }\r\n    },\r\n    created() {},\r\n    mounted() {\r\n        this.$eventBus.$on('global-search-toggle', () => {\r\n            this.isShow = !this.isShow\r\n        })\r\n        this.$store.state.menu.routes.map(item => {\r\n            this.getSourceList(item.children)\r\n        })\r\n    },\r\n    methods: {\r\n        isExternal(path) {\r\n            return /^(https?:|mailto:|tel:)/.test(path)\r\n        },\r\n        hasChildren(item) {\r\n            let flag = true\r\n            if (item.children) {\r\n                if (item.children.every(i => i.meta.sidebar === false)) {\r\n                    flag = false\r\n                }\r\n            } else {\r\n                flag = false\r\n            }\r\n            return flag\r\n        },\r\n        getSourceList(arr) {\r\n            arr.map(item => {\r\n                if (item.meta.sidebar !== false) {\r\n                    if (this.hasChildren(item)) {\r\n                        let baseBreadcrumb = item.meta.baseBreadcrumb ? deepClone(item.meta.baseBreadcrumb) : []\r\n                        baseBreadcrumb.push(item.meta.title)\r\n                        let child = deepClone(item.children)\r\n                        child.map(c => {\r\n                            c.meta.baseIcon = item.meta.icon || item.meta.baseIcon\r\n                            c.meta.baseBreadcrumb = baseBreadcrumb\r\n                            c.meta.basePath = item.meta.basePath ? [item.meta.basePath, item.path].join('/') : item.path\r\n                        })\r\n                        this.getSourceList(child)\r\n                    } else {\r\n                        let breadcrumb = []\r\n                        if (item.meta.baseBreadcrumb) {\r\n                            breadcrumb = deepClone(item.meta.baseBreadcrumb)\r\n                        }\r\n                        breadcrumb.push(item.meta.title)\r\n                        let path = ''\r\n                        if (this.isExternal(item.path)) {\r\n                            path = item.path\r\n                        } else {\r\n                            path = item.meta.basePath ? [item.meta.basePath, item.path].join('/') : item.path\r\n                        }\r\n                        this.sourceList.push({\r\n                            icon: item.meta.icon || item.meta.baseIcon,\r\n                            title: item.meta.title,\r\n                            breadcrumb: breadcrumb,\r\n                            path: path,\r\n                            isExternal: this.isExternal(item.path)\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#search {\r\n    position: fixed;\r\n    z-index: 2000;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba($color: #000, $alpha: 0.5);\r\n    backdrop-filter: blur(10px);\r\n    transition: all 0.2s;\r\n    transform: translateZ(0);\r\n    opacity: 0;\r\n    visibility: hidden;\r\n    &.searching {\r\n        opacity: 1;\r\n        visibility: visible;\r\n        .container {\r\n            transform: initial;\r\n            filter: initial;\r\n        }\r\n    }\r\n    .container {\r\n        display: flex;\r\n        flex-direction: column;\r\n        max-width: 800px;\r\n        height: 100%;\r\n        margin: 0 auto;\r\n        transition: all 0.2s;\r\n        transform: scale(1.1);\r\n        filter: blur(10px);\r\n        .search-box {\r\n            margin: 50px 20px 0;\r\n            ::v-deep .el-input__inner {\r\n                height: 52px;\r\n                line-height: 52px;\r\n            }\r\n            .tips {\r\n                margin: 20px 0 40px;\r\n                line-height: 24px;\r\n                font-size: 14px;\r\n                text-align: center;\r\n                color: #fff;\r\n                span {\r\n                    margin: 0 5px;\r\n                    padding: 1px 5px 2px;\r\n                    border-radius: 5px;\r\n                    font-weight: bold;\r\n                    background-color: rgba($color: #000, $alpha: 0.5);\r\n                }\r\n            }\r\n        }\r\n        .result {\r\n            margin: 0 20px;\r\n            max-height: calc(100% - 250px);\r\n            border-radius: 5px;\r\n            overflow: auto;\r\n            background-color: #fff;\r\n            .item {\r\n                display: flex;\r\n                align-items: center;\r\n                text-decoration: none;\r\n                cursor: pointer;\r\n                &:hover {\r\n                    transition: all 0.3s;\r\n                    background-color: #f5f7fa;\r\n                    .icon .svg-icon {\r\n                        color: #409eff;\r\n                        transform: scale(1.2);\r\n                    }\r\n                    .info {\r\n                        .title {\r\n                            color: #333;\r\n                        }\r\n                        .breadcrumb,\r\n                        .path {\r\n                            color: #606266;\r\n                        }\r\n                    }\r\n                }\r\n                .icon {\r\n                    flex: 0 0 66px;\r\n                    text-align: center;\r\n                    .svg-icon {\r\n                        color: #999;\r\n                        font-size: 20px;\r\n                        transition: all 0.3s;\r\n                    }\r\n                }\r\n                .info {\r\n                    flex: 1;\r\n                    height: 70px;\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                    justify-content: space-around;\r\n                    border-left: 1px solid #ebeef5;\r\n                    padding: 5px 10px 7px;\r\n                    @include text-overflow(1, true);\r\n                    .title {\r\n                        font-size: 18px;\r\n                        font-weight: bold;\r\n                        color: #666;\r\n                        @include text-overflow(1, true);\r\n                        .svg-icon {\r\n                            font-size: 14px;\r\n                        }\r\n                    }\r\n                    .breadcrumb,\r\n                    .path {\r\n                        font-size: 12px;\r\n                        color: #c0c4cc;\r\n                        transition: all 0.3s;\r\n                        @include text-overflow(1, true);\r\n                    }\r\n                    .breadcrumb {\r\n                        span:last-child i {\r\n                            display: none;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n"]}]}