{"remainingRequest":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\RQDL\\base\\backend-admin\\src\\components\\FileUpload\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\RQDL\\base\\backend-admin\\src\\components\\FileUpload\\index.vue","mtime":1620715077786},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\RQDL\\base\\backend-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogJ0ZpbGVVcGxvYWQnLA0KICAgIHByb3BzOiB7DQogICAgICAgIGFjdGlvbjogew0KICAgICAgICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge30NCiAgICAgICAgfSwNCiAgICAgICAgZGF0YTogew0KICAgICAgICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4ge30NCiAgICAgICAgfSwNCiAgICAgICAgbmFtZTogew0KICAgICAgICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgICAgICAgZGVmYXVsdDogJ2ZpbGUnDQogICAgICAgIH0sDQogICAgICAgIHNpemU6IHsNCiAgICAgICAgICAgIHR5cGU6IE51bWJlciwNCiAgICAgICAgICAgIGRlZmF1bHQ6IDINCiAgICAgICAgfSwNCiAgICAgICAgbWF4OiB7DQogICAgICAgICAgICB0eXBlOiBOdW1iZXIsDQogICAgICAgICAgICBkZWZhdWx0OiAzDQogICAgICAgIH0sDQogICAgICAgIGZpbGVzOiB7DQogICAgICAgICAgICB0eXBlOiBBcnJheSwNCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IFtdDQogICAgICAgIH0sDQogICAgICAgIG5vdGlwOiB7DQogICAgICAgICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICAgICAgfSwNCiAgICAgICAgZXh0OiB7DQogICAgICAgICAgICB0eXBlOiBBcnJheSwNCiAgICAgICAgICAgIGRlZmF1bHQ6ICgpID0+IFsnemlwJywgJ3JhciddDQogICAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsNCiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZS5uYW1lLnNwbGl0KCcuJykNCiAgICAgICAgICAgIGNvbnN0IGZpbGVFeHQgPSBmaWxlTmFtZVtmaWxlTmFtZS5sZW5ndGggLSAxXQ0KICAgICAgICAgICAgY29uc3QgaXNUeXBlT2sgPSB0aGlzLmV4dC5pbmRleE9mKGZpbGVFeHQpID49IDANCiAgICAgICAgICAgIGNvbnN0IGlzU2l6ZU9rID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCB0aGlzLnNpemUNCiAgICAgICAgICAgIGlmICghaXNUeXBlT2spIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDkuIrkvKDmlofku7blj6rmlK/mjIEgJHsgdGhpcy5leHQuam9pbignIC8gJykgfSDmoLzlvI/vvIFgKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFpc1NpemVPaykgew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOS4iuS8oOaWh+S7tuWkp+Wwj+S4jeiDvei2hei/hyAke3RoaXMuc2l6ZX1NQu+8gWApDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gaXNUeXBlT2sgJiYgaXNTaXplT2sNCiAgICAgICAgfSwNCiAgICAgICAgb25FeGNlZWQoKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+aWh+S7tuS4iuS8oOi2hei/h+mZkOWIticpDQogICAgICAgIH0sDQogICAgICAgIG9uU3VjY2VzcyhyZXMsIGZpbGUpIHsNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ29uLXN1Y2Nlc3MnLCByZXMsIGZpbGUpDQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/FileUpload","sourcesContent":["<template>\r\n    <el-upload\r\n        :action=\"action\"\r\n        :data=\"data\"\r\n        :name=\"name\"\r\n        :before-upload=\"beforeUpload\"\r\n        :on-exceed=\"onExceed\"\r\n        :on-success=\"onSuccess\"\r\n        :file-list=\"files\"\r\n        :limit=\"max\"\r\n        drag\r\n    >\r\n        <div class=\"slot\">\r\n            <i class=\"el-icon-upload\" />\r\n            <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n        </div>\r\n        <div v-if=\"!notip\" slot=\"tip\" class=\"el-upload__tip\">\r\n            <div style=\"display: inline-block;\">\r\n                <el-alert :title=\"`上传文件支持 ${ ext.join(' / ') } 格式，单个文件大小不超过 ${ size }MB，且文件数量不超过 ${ max } 个`\" type=\"info\" show-icon :closable=\"false\" />\r\n            </div>\r\n        </div>\r\n    </el-upload>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'FileUpload',\r\n    props: {\r\n        action: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        headers: {\r\n            type: Object,\r\n            default: () => {}\r\n        },\r\n        data: {\r\n            type: Object,\r\n            default: () => {}\r\n        },\r\n        name: {\r\n            type: String,\r\n            default: 'file'\r\n        },\r\n        size: {\r\n            type: Number,\r\n            default: 2\r\n        },\r\n        max: {\r\n            type: Number,\r\n            default: 3\r\n        },\r\n        files: {\r\n            type: Array,\r\n            default: () => []\r\n        },\r\n        notip: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        ext: {\r\n            type: Array,\r\n            default: () => ['zip', 'rar']\r\n        }\r\n    },\r\n    methods: {\r\n        beforeUpload(file) {\r\n            const fileName = file.name.split('.')\r\n            const fileExt = fileName[fileName.length - 1]\r\n            const isTypeOk = this.ext.indexOf(fileExt) >= 0\r\n            const isSizeOk = file.size / 1024 / 1024 < this.size\r\n            if (!isTypeOk) {\r\n                this.$message.error(`上传文件只支持 ${ this.ext.join(' / ') } 格式！`)\r\n            }\r\n            if (!isSizeOk) {\r\n                this.$message.error(`上传文件大小不能超过 ${this.size}MB！`)\r\n            }\r\n            return isTypeOk && isSizeOk\r\n        },\r\n        onExceed() {\r\n            this.$message.warning('文件上传超过限制')\r\n        },\r\n        onSuccess(res, file) {\r\n            this.$emit('on-success', res, file)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-upload-dragger {\r\n    width: auto;\r\n    height: auto;\r\n    overflow: unset;\r\n    &.is-dragover {\r\n        border-width: 1px;\r\n    }\r\n}\r\n.slot {\r\n    width: 300px;\r\n    height: 160px;\r\n}\r\n</style>\r\n"]}]}